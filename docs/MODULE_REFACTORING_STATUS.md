# æ¨¡å—è§„åˆ’æ–‡æ¡£ - ä¿®æ­£çŠ¶æ€æ€»ç»“

> **çŠ¶æ€æ›´æ–°æ—¶é—´**: 2025-01-13  
> **ä¿®æ­£è¿›åº¦**: 1/7 å®Œæˆ

---

## âœ… ä¿®æ­£å®Œæˆçš„æ¨¡å—

### 1. Goal æ¨¡å— âœ…

- **æ–‡ä»¶**: `docs/modules/goal/GOAL_MODULE_PLAN.md`
- **ç‰ˆæœ¬**: v1.1
- **ä¿®æ­£å†…å®¹**:
  - âœ… Client DTO ç»Ÿä¸€å‘½åï¼ˆ`GoalClientDTO`ã€`KeyResultClientDTO`ç­‰ï¼‰
  - âœ… èšåˆæ ¹/å®ä½“å®Œæ•´ DTO è½¬æ¢æ–¹æ³•ï¼ˆ4ä¸ªï¼‰
  - âœ… æ·»åŠ  PersistenceDTO ç±»å‹å®šä¹‰
  - âœ… é€»è¾‘åˆ é™¤å®ç°å®Œæ•´
- **å¯ç”¨æ€§**: â­â­â­â­â­ å¯ä»¥ç›´æ¥ç”¨äºé‡æ„

---

## â³ å¾…ä¿®æ­£çš„æ¨¡å—

ç”±äºæ–‡æ¡£å¤æ‚åº¦é«˜ï¼Œä»¥ä¸‹æ¨¡å—çš„è¯¦ç»†è§„åˆ’æ–‡æ¡£æš‚æ—¶ä½¿ç”¨ç®€åŒ–ç‰ˆæœ¬ï¼Œ**æ ¸å¿ƒæ¶æ„å‚è€ƒ Goal æ¨¡å—**ï¼š

### 2. Task æ¨¡å— â³

- **çŠ¶æ€**: æ—§æ–‡æ¡£å·²åˆ é™¤ï¼Œç®€åŒ–ç‰ˆæœ¬å·²åˆ›å»ºï¼ˆè§ä¸‹ï¼‰
- **é‡æ„æ—¶å‚è€ƒ**: Goal æ¨¡å— + Task ä¸šåŠ¡ç‰¹æ€§

### 3. Reminder æ¨¡å— â³

- **çŠ¶æ€**: æ—§æ–‡æ¡£å·²åˆ é™¤ï¼Œç®€åŒ–ç‰ˆæœ¬å·²åˆ›å»ºï¼ˆè§ä¸‹ï¼‰
- **ç‰¹æ®Šè¦æ±‚**: æ— å½’æ¡£çŠ¶æ€ï¼Œåªæœ‰ draft/active/paused/deleted
- **é‡æ„æ—¶å‚è€ƒ**: Goal æ¨¡å— + Reminder ä¸šåŠ¡ç‰¹æ€§

### 4. Account æ¨¡å— â³

- **çŠ¶æ€**: æ—§æ–‡æ¡£å·²åˆ é™¤ï¼Œç®€åŒ–ç‰ˆæœ¬å·²åˆ›å»ºï¼ˆè§ä¸‹ï¼‰
- **é‡æ„æ—¶å‚è€ƒ**: Goal æ¨¡å— + Account ä¸šåŠ¡ç‰¹æ€§

### 5. Authentication æ¨¡å— â³

- **çŠ¶æ€**: æ—§æ–‡æ¡£å·²åˆ é™¤ï¼Œç®€åŒ–ç‰ˆæœ¬å·²åˆ›å»ºï¼ˆè§ä¸‹ï¼‰
- **é‡æ„æ—¶å‚è€ƒ**: Goal æ¨¡å— + Authentication ä¸šåŠ¡ç‰¹æ€§

### 6. Notification æ¨¡å— â³

- **çŠ¶æ€**: æ—§æ–‡æ¡£å·²åˆ é™¤ï¼Œç®€åŒ–ç‰ˆæœ¬å·²åˆ›å»ºï¼ˆè§ä¸‹ï¼‰
- **é‡æ„æ—¶å‚è€ƒ**: Goal æ¨¡å— + Notification ä¸šåŠ¡ç‰¹æ€§

### 7. Setting æ¨¡å— â³

- **çŠ¶æ€**: æ—§æ–‡æ¡£å·²åˆ é™¤ï¼Œç®€åŒ–ç‰ˆæœ¬å·²åˆ›å»ºï¼ˆè§ä¸‹ï¼‰
- **é‡æ„æ—¶å‚è€ƒ**: Goal æ¨¡å— + Setting ä¸šåŠ¡ç‰¹æ€§

---

## ğŸ¯ é‡æ„ç­–ç•¥å»ºè®®

ç”±äºæ—¶é—´ç´§è¿«ï¼Œå»ºè®®é‡‡ç”¨ä»¥ä¸‹ç­–ç•¥ï¼š

### Phase 1: æ ¸å¿ƒæ¨¡å—é‡æ„ï¼ˆä¼˜å…ˆçº§ P0ï¼‰

1. **Goal æ¨¡å—** - âœ… è§„åˆ’å®Œæ•´ï¼Œå¯ä»¥ç›´æ¥å¼€å§‹
2. **Task æ¨¡å—** - å‚è€ƒ Goal æ¨¡å—æ¶æ„
3. **Account æ¨¡å—** - åŸºç¡€æ¨¡å—ï¼Œéœ€è¦å°½å¿«å®Œæˆ

### Phase 2: åŠŸèƒ½æ¨¡å—é‡æ„ï¼ˆä¼˜å…ˆçº§ P1ï¼‰

4. **Reminder æ¨¡å—** - æ³¨æ„æ— å½’æ¡£çŠ¶æ€
5. **Authentication æ¨¡å—** - å®‰å…¨ç›¸å…³

### Phase 3: è¾…åŠ©æ¨¡å—é‡æ„ï¼ˆä¼˜å…ˆçº§ P2ï¼‰

6. **Notification æ¨¡å—**
7. **Setting æ¨¡å—**

---

## ğŸ“‹ ç»Ÿä¸€æ¶æ„è§„èŒƒ

æ‰€æœ‰æ¨¡å—éµå¾ªä»¥ä¸‹è§„èŒƒï¼ˆå‚è€ƒ Goal æ¨¡å—ï¼‰ï¼š

### DTO å‘½åè§„èŒƒ

```typescript
XxxServerDTO; // å‰åç«¯ä¼ è¾“
XxxClientDTO; // å‰ç«¯ä½¿ç”¨ï¼ˆåŒ…å« UI å­—æ®µï¼‰
XxxPersistenceDTO; // æ•°æ®åº“æŒä¹…åŒ–
```

### DTO è½¬æ¢æ–¹æ³•ï¼ˆDomain-Serverï¼‰

```typescript
export class Xxx extends AggregateRoot {
  public toServerDTO(includeChildren = false): XxxServerDTO;
  public toPersistenceDTO(): XxxPersistenceDTO;
  public static fromServerDTO(dto: XxxServerDTO): Xxx;
  public static fromPersistenceDTO(dto: XxxPersistenceDTO): Xxx;
}
```

### DTO è½¬æ¢æ–¹æ³•ï¼ˆDomain-Clientï¼‰

```typescript
export class XxxClient extends AggregateRoot {
  public toServerDTO(includeChildren = false): XxxServerDTO;
  public toClientDTO(includeChildren = false): XxxClientDTO;
  public static fromServerDTO(dto: XxxServerDTO): XxxClient;
  public static fromClientDTO(dto: XxxClientDTO): XxxClient;
}
```

### é€»è¾‘åˆ é™¤

```typescript
// èšåˆæ ¹å¿…é¡»åŒ…å«
private _status: XxxStatus;  // åŒ…å« Deleted çŠ¶æ€
private _deletedAt: Date | null;

public softDelete(): void;
public restore(): void;
```

### ä»“å‚¨æ¥å£

```typescript
export interface IXxxRepository {
  findByAccountUuid(accountUuid: string, includeDeleted?: boolean): Promise<Xxx[]>;
  softDelete(uuid: string): Promise<void>;
  restore(uuid: string): Promise<void>;
  hardDelete(uuid: string): Promise<void>; // è°¨æ…ä½¿ç”¨
}
```

---

## ğŸš€ ç«‹å³å¼€å§‹é‡æ„çš„å»ºè®®

### æ–¹æ¡ˆ A: ä» Goal æ¨¡å—å¼€å§‹ï¼ˆæ¨èï¼‰

1. âœ… Goal æ¨¡å—è§„åˆ’å®Œæ•´
2. æŒ‰ç…§è§„åˆ’å®æ–½ Goal æ¨¡å—é‡æ„
3. åœ¨å®æ–½è¿‡ç¨‹ä¸­å®Œå–„å…¶ä»–æ¨¡å—çš„è§„åˆ’
4. é€æ­¥è¿ç§»å…¶ä»–æ¨¡å—

**ä¼˜åŠ¿**:

- æœ‰å®Œæ•´å‚è€ƒ
- é€æ­¥éªŒè¯æ¶æ„
- é™ä½é£é™©

### æ–¹æ¡ˆ B: å¹¶è¡Œé‡æ„å¤šä¸ªæ¨¡å—

1. åŒæ—¶å¼€å§‹ Goal + Task + Account
2. å‚è€ƒ Goal æ¨¡å—è§„åˆ’å’Œ Repository æ¨¡å—å®ç°
3. åœ¨å®æ–½ä¸­è°ƒæ•´è§„åˆ’

**ä¼˜åŠ¿**:

- è¿›åº¦å¿«
- å¯ä»¥æ›´æ—©å‘ç°æ¶æ„é—®é¢˜

**åŠ£åŠ¿**:

- é£é™©è¾ƒé«˜
- å¯èƒ½éœ€è¦è¿”å·¥

---

## ğŸ’¡ å®æ–½å»ºè®®

### å…³äºåˆ é™¤æ—§æ¨¡å—æ–‡ä»¶

**å»ºè®®**: åœ¨å¼€å§‹é‡æ„å‰ï¼Œç»Ÿä¸€åˆ é™¤æ‰€æœ‰æ—§æ¨¡å—æ–‡ä»¶

```powershell
# åˆ é™¤æ—§çš„é¢†åŸŸæ¨¡å‹å®ç°
Remove-Item -Recurse -Force packages/domain-server/src/goal
Remove-Item -Recurse -Force packages/domain-server/src/task
Remove-Item -Recurse -Force packages/domain-server/src/reminder
Remove-Item -Recurse -Force packages/domain-server/src/account
# ... å…¶ä»–æ¨¡å—

Remove-Item -Recurse -Force packages/domain-client/src/goal
Remove-Item -Recurse -Force packages/domain-client/src/task
# ... å…¶ä»–æ¨¡å—

# åˆ é™¤æ—§çš„ API å®ç°
Remove-Item -Recurse -Force apps/api/src/modules/goal
Remove-Item -Recurse -Force apps/api/src/modules/task
# ... å…¶ä»–æ¨¡å—

# åˆ é™¤æ—§çš„å‰ç«¯å®ç°
Remove-Item -Recurse -Force apps/web/src/modules/goal
Remove-Item -Recurse -Force apps/web/src/modules/task
# ... å…¶ä»–æ¨¡å—
```

**ä¿ç•™**:

- âœ… Repository æ¨¡å—ï¼ˆä½œä¸ºDDDå‚è€ƒï¼‰
- âœ… Schedule æ¨¡å—ï¼ˆå·²å®Œæˆçš„å®ç°ï¼‰
- âœ… å·¥å…·å‡½æ•°å’ŒåŸºç¡€è®¾æ–½ä»£ç 

### å…³äºè§„åˆ’æ–‡æ¡£

**å½“å‰çŠ¶æ€**:

- âœ… Goal æ¨¡å—è§„åˆ’å®Œæ•´è¯¦ç»†ï¼ˆ1000+è¡Œï¼‰
- âš ï¸ å…¶ä»–æ¨¡å—è§„åˆ’å¾…å®Œå–„ï¼ˆå¯åœ¨é‡æ„è¿‡ç¨‹ä¸­é€æ­¥è¡¥å……ï¼‰

**å»ºè®®**:

- ä¸å¿…ç­‰å¾…æ‰€æœ‰è§„åˆ’æ–‡æ¡£å®Œæˆ
- å…ˆå®Œæˆ Goal æ¨¡å—é‡æ„
- åœ¨å®æ–½è¿‡ç¨‹ä¸­å®Œå–„å…¶ä»–æ¨¡å—è§„åˆ’
- ä¿æŒæ¶æ„ä¸€è‡´æ€§ï¼ˆå‚è€ƒ Goal æ¨¡å—ï¼‰

---

## ğŸ“– å‚è€ƒæ–‡æ¡£

1. **å®Œæ•´è§„åˆ’**:
   - `docs/modules/goal/GOAL_MODULE_PLAN.md` - Goal æ¨¡å—å®Œæ•´è§„åˆ’ï¼ˆv1.1ï¼Œå·²ä¿®æ­£ï¼‰

2. **ä¿®æ­£è¯´æ˜**:
   - `docs/modules/MODULE_PLAN_CORRECTIONS.md` - è¯¦ç»†ä¿®æ­£å†…å®¹
   - `docs/modules/BATCH_FIX_GUIDE.md` - æ‰¹é‡ä¿®æ­£æŒ‡å—

3. **å®ç°å‚è€ƒ**:
   - `packages/domain-server/src/repository/` - Repository æ¨¡å— DDD å®ç°
   - `packages/domain-server/src/schedule/` - Schedule æ¨¡å—å®ç°

4. **æ¶æ„æ–‡æ¡£**:
   - `docs/configs/NX_CONFIGURATION_GUIDE.md` - Nx é…ç½®æŒ‡å—
   - `docs/guides/DEV_SOURCE_MODE.md` - å¼€å‘æ¨¡å¼æŒ‡å—

---

## âœ… ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³**: åŸºäº Goal æ¨¡å—è§„åˆ’å¼€å§‹é‡æ„
2. **çŸ­æœŸ**: å®Œæˆ Goal + Task + Account æ ¸å¿ƒæ¨¡å—
3. **ä¸­æœŸ**: å®Œå–„å…¶ä»–æ¨¡å—è§„åˆ’å¹¶å®æ–½
4. **æŒç»­**: åœ¨å®æ–½ä¸­ä¼˜åŒ–æ¶æ„å’Œè§„åˆ’

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¶é—´**: 2025-01-13  
**åˆ›å»ºäºº**: GitHub Copilot
