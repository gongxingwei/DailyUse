# Feature Spec: æ™ºèƒ½æé†’é¢‘ç‡è°ƒæ•´

> **åŠŸèƒ½ç¼–å·**: REMINDER-001  
> **RICE è¯„åˆ†**: 392 (Reach: 7, Impact: 7, Confidence: 8, Effort: 1)  
> **ä¼˜å…ˆçº§**: P0  
> **é¢„ä¼°æ—¶é—´**: 1-1.5 å‘¨  
> **çŠ¶æ€**: Draft  
> **è´Ÿè´£äºº**: TBD  
> **æœ€åæ›´æ–°**: 2025-10-21

---

## 1. æ¦‚è¿°ä¸ç›®æ ‡

### èƒŒæ™¯ä¸ç—›ç‚¹

æé†’åŠŸèƒ½æ˜¯æ•ˆèƒ½å·¥å…·çš„æ ¸å¿ƒï¼Œä½†å½“å‰å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

- âŒ æé†’é¢‘ç‡å›ºå®šï¼Œæ— æ³•é€‚åº”ç”¨æˆ·çš„å®é™…éœ€æ±‚å˜åŒ–
- âŒ ç”¨æˆ·é¢‘ç¹å¿½ç•¥æé†’æ—¶ï¼Œç³»ç»Ÿä»æŒ‰åŸé¢‘ç‡å‘é€ï¼ˆé€ æˆæ‰“æ‰°ï¼‰
- âŒ é‡è¦æé†’æ·¹æ²¡åœ¨å¤§é‡æ— å…³æé†’ä¸­ï¼Œç”¨æˆ·é”™è¿‡å…³é”®ä¿¡æ¯
- âŒ æ²¡æœ‰å­¦ä¹ ç”¨æˆ·çš„å“åº”æ¨¡å¼ï¼Œæ— æ³•è‡ªåŠ¨ä¼˜åŒ–æé†’ç­–ç•¥

### ç›®æ ‡ç”¨æˆ·

- **ä¸»è¦ç”¨æˆ·**: é«˜é¢‘æé†’ä½¿ç”¨è€…ï¼ˆæ¯å¤© 10+ æé†’ï¼‰
- **æ¬¡è¦ç”¨æˆ·**: å¯¹æé†’æ‰“æ‰°æ•æ„Ÿçš„ç”¨æˆ·
- **å…¸å‹ç”»åƒ**: å¸Œæœ›æé†’"æ°åˆ°å¥½å¤„"â€”â€”æ—¢ä¸é—æ¼é‡è¦äº‹é¡¹ï¼Œä¹Ÿä¸è¿‡åº¦æ‰“æ‰°

### ä»·å€¼ä¸»å¼ 

**ä¸€å¥è¯ä»·å€¼**: æ ¹æ®ç”¨æˆ·è¡Œä¸ºè‡ªé€‚åº”è°ƒæ•´æé†’é¢‘ç‡ï¼Œå®ç°"æ°åˆ°å¥½å¤„"çš„æé†’ä½“éªŒ

**æ ¸å¿ƒæ”¶ç›Š**:

- âœ… è‡ªåŠ¨è¯†åˆ«ç”¨æˆ·å¯¹æé†’çš„å“åº”æ¨¡å¼ï¼ˆç‚¹å‡»ç‡ã€å¿½ç•¥ç‡ã€å»¶è¿Ÿæ—¶é—´ï¼‰
- âœ… æ™ºèƒ½é™ä½é¢‘ç¹è¢«å¿½ç•¥æé†’çš„å‘é€é¢‘ç‡
- âœ… æå‡é‡è¦æé†’çš„è§¦è¾¾ç‡å’Œå“åº”ç‡
- âœ… å‡å°‘æé†’ç–²åŠ³ï¼Œæ”¹å–„ç”¨æˆ·ä½“éªŒ

---

## 2. ç”¨æˆ·ä»·å€¼ä¸åœºæ™¯

### æ ¸å¿ƒåœºæ™¯ 1: è‡ªåŠ¨æ£€æµ‹æé†’å“åº”æ¨¡å¼

**åœºæ™¯æè¿°**:  
ç³»ç»Ÿè‡ªåŠ¨åˆ†æç”¨æˆ·å¯¹æŸç±»æé†’çš„å“åº”è¡Œä¸ºï¼Œè¯†åˆ«æé†’æ•ˆæœã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a æé†’ä½¿ç”¨è€…
I want ç³»ç»Ÿè‡ªåŠ¨åˆ†ææˆ‘å¯¹æé†’çš„å“åº”æƒ…å†µ
So that ç³»ç»Ÿå¯ä»¥äº†è§£å“ªäº›æé†’å¯¹æˆ‘æœ‰æ•ˆï¼Œå“ªäº›æ— æ•ˆ
```

**æ“ä½œæµç¨‹**:

1. ç³»ç»Ÿæ¯å¤©å‡Œæ™¨æ‰§è¡Œæé†’æ•ˆæœåˆ†æä»»åŠ¡
2. ç»Ÿè®¡è¿‡å» 7 å¤©æ¯ä¸ªæé†’çš„ï¼š
   - **ç‚¹å‡»ç‡**: ç‚¹å‡»æ¬¡æ•° / å‘é€æ¬¡æ•°
   - **å¿½ç•¥ç‡**: å¿½ç•¥æ¬¡æ•° / å‘é€æ¬¡æ•°
   - **å¹³å‡å“åº”æ—¶é—´**: ä»å‘é€åˆ°ç‚¹å‡»çš„å¹³å‡æ—¶é•¿
   - **å»¶è¿Ÿæ¬¡æ•°**: ç‚¹å‡»"ç¨åæé†’"çš„æ¬¡æ•°
3. æ ¹æ®å“åº”æ¨¡å¼åˆ†ç±»æé†’ï¼š
   - ğŸŸ¢ **é«˜æ•ˆæé†’**: ç‚¹å‡»ç‡ > 70%
   - ğŸŸ¡ **ä¸­æ•ˆæé†’**: ç‚¹å‡»ç‡ 30%-70%
   - ğŸ”´ **ä½æ•ˆæé†’**: ç‚¹å‡»ç‡ < 30%
4. ç”Ÿæˆæé†’æ•ˆæœæŠ¥å‘Š

**é¢„æœŸç»“æœ**:

- Reminder è¡¨æ–°å¢å­—æ®µï¼š
  ```typescript
  readonly responseMetrics?: {
    clickRate: number;         // ç‚¹å‡»ç‡ (0-100)
    ignoreRate: number;        // å¿½ç•¥ç‡ (0-100)
    avgResponseTime: number;   // å¹³å‡å“åº”æ—¶é—´ï¼ˆç§’ï¼‰
    snoozeCount: number;       // å»¶è¿Ÿæ¬¡æ•°
    effectivenessScore: number; // æ•ˆæœè¯„åˆ† (0-100)
    lastAnalysisTime: number;  // æœ€ååˆ†ææ—¶é—´
  }
  ```
- æ•ˆæœè¯„åˆ†ç®—æ³•ï¼š

  ```typescript
  effectivenessScore = (clickRate Ã— 0.5) +
                       ((100 - ignoreRate) Ã— 0.3) +
                       (responsiveness Ã— 0.2)

  where responsiveness = min(100, (60 / avgResponseTime) Ã— 100)
  ```

---

### æ ¸å¿ƒåœºæ™¯ 2: è‡ªåŠ¨è°ƒæ•´æé†’é¢‘ç‡

**åœºæ™¯æè¿°**:  
ç³»ç»Ÿæ ¹æ®æé†’æ•ˆæœè‡ªåŠ¨è°ƒæ•´å‘é€é¢‘ç‡ã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a æé†’ä½¿ç”¨è€…
I want ç³»ç»Ÿè‡ªåŠ¨é™ä½æˆ‘é¢‘ç¹å¿½ç•¥çš„æé†’çš„å‘é€é¢‘ç‡
So that æˆ‘ä¸ä¼šè¢«æ— æ•ˆæé†’æ‰“æ‰°
```

**æ“ä½œæµç¨‹**:

1. ç³»ç»Ÿæ£€æµ‹åˆ°æŸä¸ªæé†’ï¼ˆå¦‚"æ¯å¤© 10:00 å–æ°´æé†’"ï¼‰çš„æ•ˆæœè¯„åˆ† < 30
2. ç”¨æˆ·åœ¨è¿‡å» 7 å¤©å†…å¿½ç•¥äº†è¯¥æé†’ 5 æ¬¡
3. ç³»ç»Ÿè‡ªåŠ¨è§¦å‘é¢‘ç‡è°ƒæ•´ï¼š
   - **å½“å‰é¢‘ç‡**: æ¯å¤© 1 æ¬¡
   - **è°ƒæ•´å»ºè®®**: æ¯ 2 å¤© 1 æ¬¡
4. å‘é€é€šçŸ¥ç»™ç”¨æˆ·ï¼š"æ£€æµ‹åˆ°æ‚¨ç»å¸¸å¿½ç•¥'å–æ°´æé†’'ï¼Œå·²è‡ªåŠ¨è°ƒæ•´ä¸ºæ¯ 2 å¤©æé†’ä¸€æ¬¡ã€‚å¦‚ä¸éœ€è¦ï¼Œå¯å…³é—­æˆ–è‡ªå®šä¹‰é¢‘ç‡ã€‚"
5. ç”¨æˆ·å¯é€‰æ‹©ï¼š
   - âœ… æ¥å—è°ƒæ•´
   - âŒ ä¿æŒåŸé¢‘ç‡
   - ğŸ—‘ï¸ ç›´æ¥å…³é—­æé†’

**é¢„æœŸç»“æœ**:

- Reminder è¡¨æ–°å¢ `frequencyAdjustment` å­—æ®µï¼š
  ```typescript
  readonly frequencyAdjustment?: {
    originalInterval: number;     // åŸå§‹é—´éš”ï¼ˆç§’ï¼‰
    adjustedInterval: number;     // è°ƒæ•´åé—´éš”ï¼ˆç§’ï¼‰
    adjustmentReason: string;     // è°ƒæ•´åŸå› 
    adjustmentTime: number;       // è°ƒæ•´æ—¶é—´
    isAutoAdjusted: boolean;      // æ˜¯å¦è‡ªåŠ¨è°ƒæ•´
    userConfirmed: boolean;       // ç”¨æˆ·æ˜¯å¦ç¡®è®¤
  }
  ```
- é¢‘ç‡è°ƒæ•´è§„åˆ™ï¼š
  | æ•ˆæœè¯„åˆ† | å¿½ç•¥ç‡ | é¢‘ç‡è°ƒæ•´ç­–ç•¥ |
  |---------|-------|-------------|
  | < 20 | > 80% | é—´éš” Ã—3ï¼ˆæˆ–å»ºè®®å…³é—­ï¼‰ |
  | 20-40 | 60-80% | é—´éš” Ã—2 |
  | 40-60 | 30-60% | ä¿æŒä¸å˜ |
  | > 60 | < 30% | ä¿æŒæˆ–ç•¥å¾®å¢åŠ é¢‘ç‡ |

---

### æ ¸å¿ƒåœºæ™¯ 3: ç”¨æˆ·æŸ¥çœ‹æé†’æ•ˆæœä»ªè¡¨ç›˜

**åœºæ™¯æè¿°**:  
ç”¨æˆ·æŸ¥çœ‹æ‰€æœ‰æé†’çš„æ•ˆæœåˆ†æï¼Œäº†è§£å“ªäº›æé†’æœ‰æ•ˆã€å“ªäº›æ— æ•ˆã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a æé†’ä½¿ç”¨è€…
I want æŸ¥çœ‹æé†’æ•ˆæœä»ªè¡¨ç›˜
So that æˆ‘å¯ä»¥äº†è§£å“ªäº›æé†’å¯¹æˆ‘æœ‰å¸®åŠ©ï¼Œæ‰‹åŠ¨è°ƒæ•´ç­–ç•¥
```

**æ“ä½œæµç¨‹**:

1. ç”¨æˆ·æ‰“å¼€"æé†’è®¾ç½®"é¡µé¢
2. ç‚¹å‡»"æé†’æ•ˆæœåˆ†æ"æ ‡ç­¾
3. ç³»ç»Ÿå±•ç¤ºä»ªè¡¨ç›˜ï¼š

   ```
   æé†’æ•ˆæœåˆ†æï¼ˆè¿‡å» 30 å¤©ï¼‰
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸ“Š æ•´ä½“ç»Ÿè®¡
   - æ€»æé†’æ•°: 150 æ¬¡
   - å¹³å‡ç‚¹å‡»ç‡: 65%
   - å¹³å‡å“åº”æ—¶é—´: 2 åˆ†é’Ÿ

   ğŸŸ¢ é«˜æ•ˆæé†’ (3 ä¸ª)
   â”œâ”€ ä¼šè®®æé†’ (ç‚¹å‡»ç‡ 90%, å“åº” 1 åˆ†é’Ÿ)
   â”œâ”€ ç›®æ ‡å¤ç›˜ (ç‚¹å‡»ç‡ 85%, å“åº” 3 åˆ†é’Ÿ)
   â””â”€ é‡è¦ä»»åŠ¡ (ç‚¹å‡»ç‡ 80%, å“åº” 2 åˆ†é’Ÿ)

   ğŸ”´ ä½æ•ˆæé†’ (2 ä¸ª)
   â”œâ”€ å–æ°´æé†’ (ç‚¹å‡»ç‡ 15%, å¿½ç•¥ç‡ 85%) âš ï¸ å»ºè®®è°ƒæ•´
   â””â”€ è¿åŠ¨æé†’ (ç‚¹å‡»ç‡ 20%, å¿½ç•¥ç‡ 80%) âš ï¸ å»ºè®®è°ƒæ•´
   ```

4. ç”¨æˆ·å¯ç‚¹å‡»æŸä¸ªæé†’æŸ¥çœ‹è¯¦ç»†è¶‹åŠ¿å›¾
5. ç”¨æˆ·å¯å¯¹ä½æ•ˆæé†’æ‰§è¡Œæ“ä½œï¼šè°ƒæ•´é¢‘ç‡ / å…³é—­ / ä¿æŒ

**é¢„æœŸç»“æœ**:

- ä»ªè¡¨ç›˜å±•ç¤ºæé†’æ•ˆæœæ’è¡Œæ¦œ
- æä¾›æ“ä½œå»ºè®®ï¼ˆè°ƒæ•´/å…³é—­ï¼‰
- æ”¯æŒå¯¼å‡ºæé†’æ•ˆæœæŠ¥å‘Šï¼ˆCSV/PDFï¼‰

---

### æ ¸å¿ƒåœºæ™¯ 4: æ™ºèƒ½æ¨èæœ€ä½³æé†’æ—¶é—´

**åœºæ™¯æè¿°**:  
ç³»ç»Ÿåˆ†æç”¨æˆ·çš„å“åº”æ—¶é—´æ¨¡å¼ï¼Œæ¨èæœ€ä½³æé†’æ—¶é—´ã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a æé†’ä½¿ç”¨è€…
I want ç³»ç»Ÿæ¨èæœ€é€‚åˆæˆ‘çš„æé†’æ—¶é—´
So that æé†’å‘é€æ—¶æˆ‘æ›´å¯èƒ½åŠæ—¶å“åº”
```

**æ“ä½œæµç¨‹**:

1. ç³»ç»Ÿåˆ†æç”¨æˆ·è¿‡å» 30 å¤©çš„å“åº”æ—¶é—´åˆ†å¸ƒï¼š

   ```
   å“åº”ç‡æœ€é«˜çš„æ—¶é—´æ®µï¼š
   - 09:00-10:00: å“åº”ç‡ 85%
   - 14:00-15:00: å“åº”ç‡ 78%
   - 20:00-21:00: å“åº”ç‡ 70%

   å“åº”ç‡æœ€ä½çš„æ—¶é—´æ®µï¼š
   - 12:00-13:00: å“åº”ç‡ 30%ï¼ˆåˆé¤æ—¶é—´ï¼‰
   - 22:00-23:00: å“åº”ç‡ 25%ï¼ˆå‡†å¤‡ç¡è§‰ï¼‰
   ```

2. ç”¨æˆ·åˆ›å»ºæ–°æé†’æ—¶ï¼Œç³»ç»Ÿæ¨èï¼š"æ ¹æ®æ‚¨çš„å†å²æ•°æ®ï¼Œå»ºè®®å°†æé†’æ—¶é—´è®¾ä¸º 09:30ï¼ˆæ­¤æ—¶æ®µå“åº”ç‡æœ€é«˜ï¼‰"
3. ç”¨æˆ·å¯æ¥å—æ¨èæˆ–è‡ªå®šä¹‰
4. ç³»ç»Ÿè®°å½•æ¨èæ¥å—ç‡ï¼ŒæŒç»­ä¼˜åŒ–æ¨èç®—æ³•

**é¢„æœŸç»“æœ**:

- æ–°å¢ `UserReminderPreferences` è¡¨ï¼š
  ```typescript
  {
    userUuid: string,
    bestTimeSlots: Array<{
      hourStart: number,
      hourEnd: number,
      avgResponseRate: number
    }>,
    worstTimeSlots: Array<{
      hourStart: number,
      hourEnd: number,
      avgResponseRate: number
    }>,
    updatedAt: number
  }
  ```
- æ¨èç®—æ³•è€ƒè™‘ï¼š
  - å†å²å“åº”ç‡
  - å·¥ä½œæ—¥ vs å‘¨æœ«
  - èŠ‚å‡æ—¥è°ƒæ•´

---

### æ ¸å¿ƒåœºæ™¯ 5: ç”¨æˆ·æ‰‹åŠ¨è°ƒæ•´é¢‘ç‡å¹¶ä¿ç•™æ™ºèƒ½æ¨è

**åœºæ™¯æè¿°**:  
ç”¨æˆ·æ‰‹åŠ¨è°ƒæ•´æŸä¸ªæé†’çš„é¢‘ç‡åï¼Œç³»ç»Ÿä»æŒç»­ç›‘æ§æ•ˆæœå¹¶æä¾›ä¼˜åŒ–å»ºè®®ã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a æé†’ä½¿ç”¨è€…
I want æ‰‹åŠ¨è°ƒæ•´é¢‘ç‡åä»èƒ½æ”¶åˆ°æ™ºèƒ½ä¼˜åŒ–å»ºè®®
So that æˆ‘å¯ä»¥åœ¨å¿…è¦æ—¶å‚è€ƒç³»ç»Ÿå»ºè®®è¿›ä¸€æ­¥ä¼˜åŒ–
```

**æ“ä½œæµç¨‹**:

1. ç”¨æˆ·å°†"å–æ°´æé†’"ä»"æ¯å¤© 1 æ¬¡"æ‰‹åŠ¨æ”¹ä¸º"æ¯ 3 å°æ—¶ 1 æ¬¡"
2. ç³»ç»Ÿè®°å½•ä¸º"ç”¨æˆ·æ‰‹åŠ¨è°ƒæ•´"
3. ç³»ç»Ÿç»§ç»­ç›‘æ§è¯¥æé†’çš„æ•ˆæœ
4. 2 å‘¨åï¼Œç³»ç»Ÿå‘ç°è¯¥æé†’çš„ç‚¹å‡»ç‡æå‡è‡³ 60%
5. ç³»ç»Ÿå‘é€æ­£é¢åé¦ˆï¼š"æ‚¨è°ƒæ•´åçš„'å–æ°´æé†’'æ•ˆæœæå‡äº† 40%ï¼ä¿æŒå½“å‰è®¾ç½®ã€‚"
6. æˆ–è€…ï¼Œå¦‚æœæ•ˆæœä»å·®ï¼Œç³»ç»Ÿå»ºè®®ï¼š"è°ƒæ•´åæ•ˆæœä»ä¸ç†æƒ³ï¼Œå»ºè®®æ”¹ä¸ºæ¯ 4 å°æ—¶ 1 æ¬¡æˆ–å…³é—­ã€‚"

**é¢„æœŸç»“æœ**:

- åŒºåˆ†"è‡ªåŠ¨è°ƒæ•´"å’Œ"æ‰‹åŠ¨è°ƒæ•´"
- æ‰‹åŠ¨è°ƒæ•´åæŒç»­ç›‘æ§ï¼Œæä¾›åé¦ˆ
- å°Šé‡ç”¨æˆ·æ„æ„¿ï¼Œä»…æä¾›å»ºè®®ï¼Œä¸å¼ºåˆ¶è°ƒæ•´

---

## 3. è®¾è®¡è¦ç‚¹

### æ¶‰åŠå­—æ®µï¼ˆå¯¹é½ Contractsï¼‰

#### æ›´æ–°èšåˆæ ¹ï¼šReminder

**ä½ç½®**: `packages/contracts/src/modules/reminder/aggregates/ReminderServer.ts`

```typescript
export interface ReminderServerDTO {
  // ...existing fields...

  // æ™ºèƒ½é¢‘ç‡ç›¸å…³å­—æ®µ
  readonly responseMetrics?: ResponseMetrics; // å“åº”æŒ‡æ ‡
  readonly frequencyAdjustment?: FrequencyAdjustment; // é¢‘ç‡è°ƒæ•´
  readonly smartFrequencyEnabled: boolean; // æ˜¯å¦å¯ç”¨æ™ºèƒ½é¢‘ç‡
}

/**
 * å“åº”æŒ‡æ ‡
 */
export interface ResponseMetrics {
  readonly clickRate: number; // ç‚¹å‡»ç‡ (0-100)
  readonly ignoreRate: number; // å¿½ç•¥ç‡ (0-100)
  readonly avgResponseTime: number; // å¹³å‡å“åº”æ—¶é—´ï¼ˆç§’ï¼‰
  readonly snoozeCount: number; // å»¶è¿Ÿæ¬¡æ•°
  readonly effectivenessScore: number; // æ•ˆæœè¯„åˆ† (0-100)
  readonly sampleSize: number; // æ ·æœ¬æ•°é‡ï¼ˆæœ€è¿‘ N æ¬¡ï¼‰
  readonly lastAnalysisTime: number; // æœ€ååˆ†ææ—¶é—´
}

/**
 * é¢‘ç‡è°ƒæ•´
 */
export interface FrequencyAdjustment {
  readonly originalInterval: number; // åŸå§‹é—´éš”ï¼ˆç§’ï¼‰
  readonly adjustedInterval: number; // è°ƒæ•´åé—´éš”ï¼ˆç§’ï¼‰
  readonly adjustmentReason: string; // è°ƒæ•´åŸå› 
  readonly adjustmentTime: number; // è°ƒæ•´æ—¶é—´
  readonly isAutoAdjusted: boolean; // æ˜¯å¦è‡ªåŠ¨è°ƒæ•´
  readonly userConfirmed: boolean; // ç”¨æˆ·æ˜¯å¦ç¡®è®¤
}

/**
 * ç”¨æˆ·æé†’åå¥½
 */
export interface UserReminderPreferences {
  readonly userUuid: string;
  readonly bestTimeSlots: TimeSlot[]; // æœ€ä½³æ—¶é—´æ®µ
  readonly worstTimeSlots: TimeSlot[]; // æœ€å·®æ—¶é—´æ®µ
  readonly globalSmartFrequency: boolean; // å…¨å±€å¯ç”¨æ™ºèƒ½é¢‘ç‡
  readonly updatedAt: number;
}

export interface TimeSlot {
  readonly hourStart: number; // å¼€å§‹å°æ—¶ (0-23)
  readonly hourEnd: number; // ç»“æŸå°æ—¶ (0-23)
  readonly avgResponseRate: number; // å¹³å‡å“åº”ç‡ (0-100)
  readonly sampleCount: number; // æ ·æœ¬æ•°é‡
}
```

---

### äº¤äº’è®¾è®¡

#### 1. å“åº”è¡Œä¸ºè¿½è¸ª

ç”¨æˆ·å¯¹æé†’çš„æ¯æ¬¡äº¤äº’éƒ½è¢«è®°å½•ï¼š

| äº¤äº’è¡Œä¸º | è®°å½•å­—æ®µ    | æƒé‡ |
| -------- | ----------- | ---- |
| ç‚¹å‡»æé†’ | `clicked`   | +1.0 |
| å¿½ç•¥æé†’ | `ignored`   | -0.5 |
| å»¶è¿Ÿæé†’ | `snoozed`   | -0.2 |
| å…³é—­æé†’ | `dismissed` | -0.3 |
| æ ‡è®°å®Œæˆ | `completed` | +1.5 |

#### 2. æ•ˆæœè¯„åˆ†ç®—æ³•

```typescript
/**
 * è®¡ç®—æé†’æ•ˆæœè¯„åˆ†
 */
function calculateEffectivenessScore(metrics: ResponseMetrics): number {
  const clickWeight = 0.5;
  const ignoreWeight = 0.3;
  const responsivenessWeight = 0.2;

  // å“åº”é€Ÿåº¦å¾—åˆ†ï¼ˆè¶Šå¿«è¶Šå¥½ï¼‰
  const responsiveness = Math.min(100, (60 / metrics.avgResponseTime) * 100);

  return (
    metrics.clickRate * clickWeight +
    (100 - metrics.ignoreRate) * ignoreWeight +
    responsiveness * responsivenessWeight
  );
}
```

#### 3. é¢‘ç‡è°ƒæ•´ç­–ç•¥

```typescript
/**
 * å†³å®šæ˜¯å¦è°ƒæ•´é¢‘ç‡
 */
function shouldAdjustFrequency(
  effectivenessScore: number,
  ignoreRate: number,
  sampleSize: number,
): 'decrease' | 'increase' | 'no_change' {
  if (sampleSize < 10) return 'no_change'; // æ ·æœ¬ä¸è¶³

  if (effectivenessScore < 20 && ignoreRate > 80) {
    return 'decrease'; // å¤§å¹…é™ä½é¢‘ç‡ï¼ˆÃ—3ï¼‰
  } else if (effectivenessScore < 40 && ignoreRate > 60) {
    return 'decrease'; // é™ä½é¢‘ç‡ï¼ˆÃ—2ï¼‰
  } else if (effectivenessScore > 80 && ignoreRate < 20) {
    return 'increase'; // å¯è€ƒè™‘å¢åŠ é¢‘ç‡
  }

  return 'no_change';
}
```

---

## 4. MVP/MMP/Full è·¯å¾„

### MVP: åŸºç¡€æ•ˆæœè¿½è¸ªï¼ˆ1-1.5 å‘¨ï¼‰

**èŒƒå›´**:

- âœ… æé†’å“åº”è¡Œä¸ºè¿½è¸ªï¼ˆç‚¹å‡»ã€å¿½ç•¥ã€å»¶è¿Ÿï¼‰
- âœ… è®¡ç®—åŸºç¡€å“åº”æŒ‡æ ‡ï¼ˆç‚¹å‡»ç‡ã€å¿½ç•¥ç‡ï¼‰
- âœ… ç®€å•æ•ˆæœè¯„åˆ†ï¼ˆ0-100ï¼‰
- âœ… æ•ˆæœä»ªè¡¨ç›˜ï¼ˆåˆ—è¡¨è§†å›¾ï¼‰
- âœ… æ‰‹åŠ¨è°ƒæ•´é¢‘ç‡åŠŸèƒ½

**æŠ€æœ¯è¦ç‚¹**:

- Contracts: å®šä¹‰ `ResponseMetrics`, `FrequencyAdjustment`
- Domain: Reminder èšåˆæ ¹æ·»åŠ  `recordResponse()` æ–¹æ³•
- Application: `AnalyzeReminderEffectivenessService` åº”ç”¨æœåŠ¡
- Infrastructure: å®šæ—¶ä»»åŠ¡ï¼ˆæ¯æ—¥å‡Œæ™¨æ‰§è¡Œåˆ†æï¼‰
- API: `GET /api/v1/reminders/effectiveness-report`
- UI: æ•ˆæœä»ªè¡¨ç›˜ç»„ä»¶

**éªŒæ”¶æ ‡å‡†**:

```gherkin
Given ç”¨æˆ·åœ¨è¿‡å» 7 å¤©å†…æ”¶åˆ°"å–æ°´æé†’" 10 æ¬¡
And ç‚¹å‡»äº† 2 æ¬¡ï¼Œå¿½ç•¥äº† 8 æ¬¡
When ç³»ç»Ÿæ‰§è¡Œæ•ˆæœåˆ†æ
Then è¯¥æé†’çš„ç‚¹å‡»ç‡åº”ä¸º 20%
And å¿½ç•¥ç‡åº”ä¸º 80%
And æ•ˆæœè¯„åˆ†åº” < 30ï¼ˆä½æ•ˆæé†’ï¼‰
And ç”¨æˆ·å¯åœ¨ä»ªè¡¨ç›˜æŸ¥çœ‹æ­¤æ•°æ®
```

---

### MMP: æ™ºèƒ½é¢‘ç‡è°ƒæ•´ï¼ˆ+1-2 å‘¨ï¼‰

**åœ¨ MVP åŸºç¡€ä¸Šæ–°å¢**:

- âœ… è‡ªåŠ¨é¢‘ç‡è°ƒæ•´ç®—æ³•
- âœ… è°ƒæ•´å»ºè®®é€šçŸ¥
- âœ… ç”¨æˆ·ç¡®è®¤/æ‹’ç»æœºåˆ¶
- âœ… æœ€ä½³æ—¶é—´æ®µæ¨è
- âœ… è°ƒæ•´æ•ˆæœè¿½è¸ªï¼ˆè°ƒæ•´å‰åå¯¹æ¯”ï¼‰

**æŠ€æœ¯è¦ç‚¹**:

- é¢‘ç‡è°ƒæ•´å†³ç­–å¼•æ“
- æ—¶é—´æ®µå“åº”ç‡åˆ†æ
- é€šçŸ¥æœåŠ¡é›†æˆ

**éªŒæ”¶æ ‡å‡†**:

```gherkin
Given "å–æ°´æé†’"çš„æ•ˆæœè¯„åˆ† < 20
When ç³»ç»Ÿæ‰§è¡Œæ™ºèƒ½é¢‘ç‡è°ƒæ•´
Then ç³»ç»Ÿåº”å‘é€è°ƒæ•´å»ºè®®é€šçŸ¥
And å»ºè®®å°†é¢‘ç‡ä»"æ¯å¤© 1 æ¬¡"æ”¹ä¸º"æ¯ 2 å¤© 1 æ¬¡"
And ç”¨æˆ·å¯é€‰æ‹©æ¥å—æˆ–æ‹’ç»
And æ¥å—åé¢‘ç‡è‡ªåŠ¨æ›´æ–°
```

---

### Full Release: æ™ºèƒ½å­¦ä¹ ä¼˜åŒ–ï¼ˆ+2-3 å‘¨ï¼‰

**åœ¨ MMP åŸºç¡€ä¸Šæ–°å¢**:

- âœ… æœºå™¨å­¦ä¹ æ¨¡å‹é¢„æµ‹æœ€ä½³é¢‘ç‡
- âœ… å¤šç»´åº¦åˆ†æï¼ˆæ—¶é—´ã€åœ°ç‚¹ã€æƒ…å¢ƒï¼‰
- âœ… A/B æµ‹è¯•åŠŸèƒ½ï¼ˆæµ‹è¯•ä¸åŒé¢‘ç‡æ•ˆæœï¼‰
- âœ… ç¾¤ä½“æ™ºèƒ½æ¨èï¼ˆå‚è€ƒç›¸ä¼¼ç”¨æˆ·æ•°æ®ï¼‰
- âœ… æé†’ç–²åŠ³åº¦é¢„è­¦

**æŠ€æœ¯è¦ç‚¹**:

- æœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆå¦‚å†³ç­–æ ‘ã€éšæœºæ£®æ—ï¼‰
- æƒ…å¢ƒæ„ŸçŸ¥ï¼ˆåŸºäºæ—¥å†ã€ä½ç½®ï¼‰
- A/B æµ‹è¯•æ¡†æ¶

**éªŒæ”¶æ ‡å‡†**:

```gherkin
Given ç³»ç»Ÿç§¯ç´¯äº† 30 å¤©çš„ç”¨æˆ·å“åº”æ•°æ®
When ç”¨æˆ·åˆ›å»ºæ–°æé†’"é”»ç‚¼æé†’"
Then ç³»ç»Ÿåº”åŸºäºå†å²æ•°æ®æ¨èï¼š
  - æœ€ä½³æ—¶é—´ï¼šå‘¨ä¸€/ä¸‰/äº” 18:00
  - æ¨èé¢‘ç‡ï¼šæ¯å‘¨ 3 æ¬¡
  - é¢„æœŸç‚¹å‡»ç‡ï¼š70%
```

---

## 5. éªŒæ”¶æ ‡å‡†ï¼ˆGherkinï¼‰

### Feature: æ™ºèƒ½æé†’é¢‘ç‡è°ƒæ•´

#### Scenario 1: è¿½è¸ªæé†’å“åº”è¡Œä¸º

```gherkin
Feature: æ™ºèƒ½æé†’é¢‘ç‡è°ƒæ•´
  ä½œä¸ºæé†’ä½¿ç”¨è€…ï¼Œæˆ‘å¸Œæœ›ç³»ç»Ÿè‡ªåŠ¨è°ƒæ•´æé†’é¢‘ç‡ï¼Œå‡å°‘æ— æ•ˆæ‰“æ‰°

  Background:
    Given ç”¨æˆ·"å‘¨å…«"å·²ç™»å½•
    And å­˜åœ¨æé†’"æ¯æ—¥ç«™ä¼š"ï¼Œé¢‘ç‡ä¸ºæ¯å¤© 09:30

  Scenario: è®°å½•ç‚¹å‡»è¡Œä¸º
    When ç”¨æˆ·åœ¨ 2025-10-21 09:30 æ”¶åˆ°æé†’
    And ç”¨æˆ·ç‚¹å‡»æé†’
    And å“åº”æ—¶é—´ä¸º 30 ç§’
    Then ç³»ç»Ÿåº”è®°å½•å“åº”è¡Œä¸ºï¼š
      | å­—æ®µ         | å€¼         |
      | action       | clicked    |
      | responseTime | 30         |
      | timestamp    | 1729569030 |
    And æé†’çš„ responseMetrics åº”æ›´æ–°

  Scenario: è®°å½•å¿½ç•¥è¡Œä¸º
    When ç”¨æˆ·æ”¶åˆ°æé†’ä½†æœªäº¤äº’
    And 5 åˆ†é’Ÿåæé†’è‡ªåŠ¨æ¶ˆå¤±
    Then ç³»ç»Ÿåº”è®°å½•å“åº”è¡Œä¸ºï¼š
      | å­—æ®µ   | å€¼      |
      | action | ignored |
    And æé†’çš„ ignoreRate åº”å¢åŠ 
```

---

#### Scenario 2: è®¡ç®—æ•ˆæœè¯„åˆ†

```gherkin
  Background:
    Given "å–æ°´æé†’"åœ¨è¿‡å» 7 å¤©æœ‰ä»¥ä¸‹å“åº”è®°å½•ï¼š
      | æ—¥æœŸ       | è¡Œä¸º    |
      | 2025-10-21 | ignored |
      | 2025-10-20 | ignored |
      | 2025-10-19 | clicked |
      | 2025-10-18 | ignored |
      | 2025-10-17 | ignored |
      | 2025-10-16 | ignored |
      | 2025-10-15 | clicked |

  Scenario: è®¡ç®—åŸºç¡€æŒ‡æ ‡
    When ç³»ç»Ÿæ‰§è¡Œæ•ˆæœåˆ†æ
    Then æé†’çš„å“åº”æŒ‡æ ‡åº”ä¸ºï¼š
      | æŒ‡æ ‡         | å€¼              |
      | clickRate    | 28.6%ï¼ˆ2/7ï¼‰    |
      | ignoreRate   | 71.4%ï¼ˆ5/7ï¼‰    |
      | sampleSize   | 7               |
    And effectivenessScore åº” < 40

  Scenario: ç”Ÿæˆæ•ˆæœæŠ¥å‘Š
    When ç”¨æˆ·æ‰“å¼€"æé†’æ•ˆæœåˆ†æ"
    Then ç³»ç»Ÿåº”æ˜¾ç¤ºæ•ˆæœæŠ¥å‘Š
    And "å–æ°´æé†’"åº”è¢«æ ‡è®°ä¸º"ä½æ•ˆæé†’"
    And æ˜¾ç¤ºå»ºè®®ï¼š"è€ƒè™‘è°ƒæ•´é¢‘ç‡æˆ–å…³é—­"
```

---

#### Scenario 3: è‡ªåŠ¨è°ƒæ•´æé†’é¢‘ç‡

```gherkin
  Background:
    Given "å–æ°´æé†’"çš„ effectivenessScore = 25
    And ignoreRate = 75%
    And å½“å‰é¢‘ç‡ä¸ºæ¯å¤© 1 æ¬¡

  Scenario: è§¦å‘è‡ªåŠ¨è°ƒæ•´
    When ç³»ç»Ÿæ£€æµ‹åˆ°æé†’æ•ˆæœä½äºé˜ˆå€¼
    Then ç³»ç»Ÿåº”è®¡ç®—è°ƒæ•´å»ºè®®ï¼š
      | åŸé¢‘ç‡      | å»ºè®®é¢‘ç‡     | è°ƒæ•´åŸå›              |
      | æ¯å¤© 1 æ¬¡   | æ¯ 2 å¤© 1 æ¬¡ | å¿½ç•¥ç‡è¿‡é«˜ï¼ˆ75%ï¼‰    |
    And ç³»ç»Ÿåº”å‘é€é€šçŸ¥ç»™ç”¨æˆ·
    And é€šçŸ¥åŒ…å«"æ¥å—"å’Œ"æ‹’ç»"æŒ‰é’®

  Scenario: ç”¨æˆ·æ¥å—è°ƒæ•´
    Given ç³»ç»Ÿå·²å‘é€è°ƒæ•´å»ºè®®é€šçŸ¥
    When ç”¨æˆ·ç‚¹å‡»"æ¥å—"
    Then æé†’çš„ interval åº”ä» 86400 ç§’æ›´æ–°ä¸º 172800 ç§’
    And frequencyAdjustment åº”è®°å½•ï¼š
      | å­—æ®µ              | å€¼                    |
      | originalInterval  | 86400                 |
      | adjustedInterval  | 172800                |
      | isAutoAdjusted    | true                  |
      | userConfirmed     | true                  |
    And æ˜¾ç¤º"é¢‘ç‡å·²è°ƒæ•´ä¸ºæ¯ 2 å¤© 1 æ¬¡"

  Scenario: ç”¨æˆ·æ‹’ç»è°ƒæ•´
    Given ç³»ç»Ÿå·²å‘é€è°ƒæ•´å»ºè®®é€šçŸ¥
    When ç”¨æˆ·ç‚¹å‡»"æ‹’ç»"
    Then æé†’é¢‘ç‡åº”ä¿æŒä¸å˜
    And ç³»ç»Ÿåº”è®°å½•"ç”¨æˆ·æ‹’ç»è‡ªåŠ¨è°ƒæ•´"
    And 30 å¤©å†…ä¸å†å»ºè®®è°ƒæ•´æ­¤æé†’
```

---

#### Scenario 4: æ¨èæœ€ä½³æé†’æ—¶é—´

```gherkin
  Background:
    Given ç”¨æˆ·è¿‡å» 30 å¤©çš„å“åº”æ—¶é—´åˆ†å¸ƒä¸ºï¼š
      | æ—¶é—´æ®µ       | å“åº”ç‡ |
      | 09:00-10:00 | 85%    |
      | 12:00-13:00 | 30%    |
      | 18:00-19:00 | 70%    |

  Scenario: åˆ›å»ºæ–°æé†’æ—¶è·å¾—æ¨è
    When ç”¨æˆ·åˆ›å»ºæ–°æé†’"å›¢é˜Ÿä¼šè®®"
    And ç”¨æˆ·æœªæŒ‡å®šæ—¶é—´
    Then ç³»ç»Ÿåº”æ¨èï¼š
      """
      æ ¹æ®æ‚¨çš„å†å²æ•°æ®ï¼Œå»ºè®®å°†æé†’æ—¶é—´è®¾ä¸ºï¼š
      1. 09:30ï¼ˆå“åº”ç‡æœ€é«˜ 85%ï¼‰
      2. 18:30ï¼ˆå“åº”ç‡æ¬¡é«˜ 70%ï¼‰

      é¿å…æ—¶é—´æ®µï¼š12:00-13:00ï¼ˆå“åº”ç‡ä»… 30%ï¼‰
      """
    And ç”¨æˆ·å¯ä¸€é”®åº”ç”¨æ¨èæ—¶é—´

  Scenario: æŸ¥çœ‹ä¸ªäººæœ€ä½³æ—¶é—´æ®µ
    When ç”¨æˆ·æ‰“å¼€"æé†’åå¥½è®¾ç½®"
    Then ç³»ç»Ÿåº”æ˜¾ç¤ºï¼š
      | ç±»åˆ«           | æ—¶é—´æ®µ       | å“åº”ç‡ |
      | æœ€ä½³æ—¶é—´æ®µ     | 09:00-10:00 | 85%    |
      | æœ€ä½³æ—¶é—´æ®µ     | 18:00-19:00 | 70%    |
      | éœ€é¿å…æ—¶é—´æ®µ   | 12:00-13:00 | 30%    |
```

---

#### Scenario 5: è°ƒæ•´æ•ˆæœè¿½è¸ª

```gherkin
  Background:
    Given "å–æ°´æé†’"åœ¨ 2025-10-01 è¢«è‡ªåŠ¨è°ƒæ•´ä¸ºæ¯ 2 å¤© 1 æ¬¡
    And è°ƒæ•´å‰ 7 å¤©çš„ clickRate = 20%

  Scenario: è¿½è¸ªè°ƒæ•´åæ•ˆæœ
    Given è°ƒæ•´åå·²è¿‡å» 14 å¤©
    When ç³»ç»Ÿåˆ†æè°ƒæ•´åçš„æ•ˆæœ
    Then ç³»ç»Ÿåº”å¯¹æ¯”ï¼š
      | æ—¶æœŸ       | clickRate | ignoreRate |
      | è°ƒæ•´å‰ 7 å¤© | 20%       | 80%        |
      | è°ƒæ•´å 14 å¤©| 60%       | 40%        |
    And ç³»ç»Ÿåº”å‘é€æ­£é¢åé¦ˆï¼š"é¢‘ç‡è°ƒæ•´åæ•ˆæœæå‡ 40%ï¼"
    And åœ¨ä»ªè¡¨ç›˜æ˜¾ç¤ºæ”¹è¿›è¶‹åŠ¿å›¾
```

---

## 6. æŒ‡æ ‡ä¸è¿½è¸ª

### äº‹ä»¶åŸ‹ç‚¹

```typescript
// æé†’å“åº”è¡Œä¸º
{
  event: 'reminder_response_recorded',
  properties: {
    reminderUuid: string,
    action: 'clicked' | 'ignored' | 'snoozed' | 'dismissed',
    responseTime: number,  // å“åº”æ—¶é—´ï¼ˆç§’ï¼‰
    timestamp: number
  }
}

// æ•ˆæœåˆ†ææ‰§è¡Œ
{
  event: 'reminder_effectiveness_analyzed',
  properties: {
    reminderUuid: string,
    clickRate: number,
    ignoreRate: number,
    effectivenessScore: number,
    sampleSize: number
  }
}

// é¢‘ç‡è‡ªåŠ¨è°ƒæ•´
{
  event: 'reminder_frequency_auto_adjusted',
  properties: {
    reminderUuid: string,
    originalInterval: number,
    adjustedInterval: number,
    adjustmentReason: string,
    userConfirmed: boolean
  }
}

// æŸ¥çœ‹æ•ˆæœä»ªè¡¨ç›˜
{
  event: 'reminder_effectiveness_dashboard_viewed',
  properties: {
    totalReminders: number,
    lowEffectiveCount: number,  // ä½æ•ˆæé†’æ•°é‡
    highEffectiveCount: number  // é«˜æ•ˆæé†’æ•°é‡
  }
}
```

---

### æˆåŠŸæŒ‡æ ‡

**å®šé‡æŒ‡æ ‡**:
| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹å¼ |
|------|-------|---------|
| æ•´ä½“æé†’ç‚¹å‡»ç‡æå‡ | +20% | å¯ç”¨æ™ºèƒ½é¢‘ç‡å vs å¯ç”¨å‰ |
| ä½æ•ˆæé†’è¯†åˆ«ç‡ | >90% | æ­£ç¡®è¯†åˆ«çš„ä½æ•ˆæé†’æ•° / æ€»ä½æ•ˆæé†’æ•° |
| ç”¨æˆ·æ¥å—è°ƒæ•´å»ºè®®ç‡ | >60% | æ¥å—æ¬¡æ•° / å»ºè®®æ¬¡æ•° |
| æé†’ç–²åŠ³æŠ•è¯‰ç‡ä¸‹é™ | -50% | ç”¨æˆ·æŠ•è¯‰"æé†’å¤ªå¤š"çš„æ¬¡æ•° |

**å®šæ€§æŒ‡æ ‡**:

- ç”¨æˆ·åé¦ˆ"æé†’æ›´ç²¾å‡†äº†"
- é‡è¦æé†’çš„åŠæ—¶å“åº”ç‡æå‡
- ç”¨æˆ·ä¸»åŠ¨å¼€å¯æ™ºèƒ½é¢‘ç‡åŠŸèƒ½

---

## 7. æŠ€æœ¯å®ç°è¦ç‚¹

### Prisma Schema

```prisma
model Reminder {
  // ...existing fields...

  // å“åº”æŒ‡æ ‡
  clickRate              Float?   @map("click_rate")
  ignoreRate             Float?   @map("ignore_rate")
  avgResponseTime        Int?     @map("avg_response_time")
  snoozeCount            Int      @default(0) @map("snooze_count")
  effectivenessScore     Float?   @map("effectiveness_score")
  sampleSize             Int      @default(0) @map("sample_size")
  lastAnalysisTime       BigInt?  @map("last_analysis_time")

  // é¢‘ç‡è°ƒæ•´
  originalInterval       Int?     @map("original_interval")
  adjustedInterval       Int?     @map("adjusted_interval")
  adjustmentReason       String?  @map("adjustment_reason")
  adjustmentTime         BigInt?  @map("adjustment_time")
  isAutoAdjusted         Boolean  @default(false) @map("is_auto_adjusted")
  userConfirmed          Boolean  @default(false) @map("user_confirmed")

  smartFrequencyEnabled  Boolean  @default(true) @map("smart_frequency_enabled")

  responses              ReminderResponse[]
}

model ReminderResponse {
  uuid          String   @id @default(uuid())
  reminderUuid  String   @map("reminder_uuid")
  action        String   // clicked, ignored, snoozed, dismissed
  responseTime  Int?     @map("response_time")  // ç§’
  timestamp     BigInt

  reminder      Reminder @relation(fields: [reminderUuid], references: [uuid])

  @@index([reminderUuid, timestamp(sort: Desc)])
  @@map("reminder_responses")
}

model UserReminderPreferences {
  uuid                    String   @id @default(uuid())
  userUuid                String   @unique @map("user_uuid")
  bestTimeSlots           Json     @map("best_time_slots")      // TimeSlot[]
  worstTimeSlots          Json     @map("worst_time_slots")     // TimeSlot[]
  globalSmartFrequency    Boolean  @default(true) @map("global_smart_frequency")
  updatedAt               DateTime @updatedAt @map("updated_at")

  @@map("user_reminder_preferences")
}
```

### Application Service

```typescript
// packages/domain-server/src/modules/reminder/application/AnalyzeReminderEffectivenessService.ts

export class AnalyzeReminderEffectivenessService {
  async execute(reminderUuid: string): Promise<void> {
    const reminder = await this.reminderRepository.findByUuid(reminderUuid);
    if (!reminder) throw new Error('Reminder not found');

    // è·å–æœ€è¿‘ N å¤©çš„å“åº”è®°å½•
    const responses = await this.getReminderResponses(reminderUuid, 7);

    // è®¡ç®—æŒ‡æ ‡
    const clickRate = this.calculateClickRate(responses);
    const ignoreRate = this.calculateIgnoreRate(responses);
    const avgResponseTime = this.calculateAvgResponseTime(responses);
    const effectivenessScore = this.calculateEffectivenessScore({
      clickRate,
      ignoreRate,
      avgResponseTime,
    });

    // æ›´æ–°æé†’æŒ‡æ ‡
    reminder.updateResponseMetrics({
      clickRate,
      ignoreRate,
      avgResponseTime,
      effectivenessScore,
      sampleSize: responses.length,
      lastAnalysisTime: Date.now(),
    });

    // å†³å®šæ˜¯å¦éœ€è¦è°ƒæ•´é¢‘ç‡
    if (this.shouldAdjustFrequency(effectivenessScore, ignoreRate)) {
      await this.suggestFrequencyAdjustment(reminder);
    }

    await this.reminderRepository.save(reminder);
  }
}
```

### API ç«¯ç‚¹

```typescript
// è·å–æ•ˆæœæŠ¥å‘Š
GET /api/v1/reminders/effectiveness-report
Response: {
  overall: { avgClickRate: number, avgEffectivenessScore: number },
  highEffective: ReminderClientDTO[],
  lowEffective: ReminderClientDTO[]
}

// æ¥å—é¢‘ç‡è°ƒæ•´
POST /api/v1/reminders/:id/accept-adjustment
Response: ReminderClientDTO

// æ‹’ç»é¢‘ç‡è°ƒæ•´
POST /api/v1/reminders/:id/reject-adjustment
Response: ReminderClientDTO

// è·å–æœ€ä½³æ—¶é—´æ®µæ¨è
GET /api/v1/reminders/recommended-time-slots
Response: { bestSlots: TimeSlot[], worstSlots: TimeSlot[] }
```

---

## 8. é£é™©ä¸ç¼“è§£

| é£é™©                 | å¯èƒ½æ€§ | å½±å“ | ç¼“è§£æªæ–½                          |
| -------------------- | ------ | ---- | --------------------------------- |
| é”™è¯¯é™ä½é‡è¦æé†’é¢‘ç‡ | ä¸­     | é«˜   | ç”¨æˆ·ç¡®è®¤æœºåˆ¶ + é‡è¦æé†’ç™½åå•     |
| æ•°æ®ä¸è¶³å¯¼è‡´è¯¯åˆ¤     | ä¸­     | ä¸­   | æœ€å°æ ·æœ¬é‡è¦æ±‚ï¼ˆâ‰¥10 æ¬¡ï¼‰          |
| ç”¨æˆ·ä¸ç†è§£è°ƒæ•´åŸå›    | ä¸­     | ä¸­   | æ¸…æ™°çš„è°ƒæ•´åŸå› è¯´æ˜ + å¯è§†åŒ–è¶‹åŠ¿å›¾ |
| éšç§é—®é¢˜ï¼ˆè¡Œä¸ºè¿½è¸ªï¼‰ | ä½     | é«˜   | æ•°æ®æœ¬åœ°åŒ– + æ˜ç¡®éšç§æ”¿ç­–         |

---

## 9. å‚è€ƒèµ„æ–™

- [Reminder Contracts](../../../../packages/contracts/src/modules/reminder/)
- [Notification Fatigue Research](https://www.nngroup.com/articles/notification-overload/)
- [Smart Notification Best Practices](https://developer.android.com/design/patterns/notifications)

---

**æ–‡æ¡£çŠ¶æ€**: âœ… Ready for PM Review  
**ä¸‹ä¸€æ­¥**: PM ç”Ÿæˆ Project Flow
