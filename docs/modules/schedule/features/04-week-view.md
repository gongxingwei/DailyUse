# Feature Spec: æ—¥ç¨‹å‘¨è§†å›¾

> **åŠŸèƒ½ç¼–å·**: SCHEDULE-004  
> **RICE è¯„åˆ†**: 147 (Reach: 7, Impact: 6, Confidence: 7, Effort: 2)  
> **ä¼˜å…ˆçº§**: P1  
> **é¢„ä¼°æ—¶é—´**: 1.5-2 å‘¨  
> **çŠ¶æ€**: Draft  
> **è´Ÿè´£äºº**: TBD  
> **æœ€åæ›´æ–°**: 2025-10-21

---

## 1. æ¦‚è¿°ä¸ç›®æ ‡

### èƒŒæ™¯ä¸ç—›ç‚¹

æ—¥å†åº”ç”¨é€šå¸¸åªæä¾›æ—¥è§†å›¾æˆ–æœˆè§†å›¾ï¼Œä½†å‘¨è§†å›¾æ˜¯æœ€å¸¸ç”¨çš„æ—¥ç¨‹è§„åˆ’ç»´åº¦ï¼š

- âŒ æ—¥è§†å›¾å¤ªå±€é™ï¼Œçœ‹ä¸åˆ°ä¸€å‘¨å…¨è²Œ
- âŒ æœˆè§†å›¾å¤ªæ¦‚æ‹¬ï¼Œäº‹ä»¶ç»†èŠ‚ä¸æ¸…æ™°
- âŒ ç¼ºå°‘å‘¨ç»´åº¦çš„æ‹–æ‹½è°ƒæ•´
- âŒ æ— æ³•å¿«é€Ÿå®‰æ’"æœ¬å‘¨"ä»»åŠ¡
- âŒ å‘¨æœ«å’Œå·¥ä½œæ—¥æ··åœ¨ä¸€èµ·éš¾ä»¥åŒºåˆ†

### ç›®æ ‡ç”¨æˆ·

- **ä¸»è¦ç”¨æˆ·**: éœ€è¦å‘¨åº¦è§„åˆ’çš„èŒåœºäººå£«
- **æ¬¡è¦ç”¨æˆ·**: å­¦ç”Ÿã€è‡ªç”±èŒä¸šè€…
- **å…¸å‹ç”»åƒ**: "æˆ‘å¸Œæœ›æ¯å‘¨æ—¥æ™šä¸Šè§„åˆ’ä¸‹å‘¨æ—¥ç¨‹ï¼Œå¹¶èƒ½ä¸€ç›®äº†ç„¶çœ‹åˆ°æ•´å‘¨å®‰æ’"

### ä»·å€¼ä¸»å¼ 

**ä¸€å¥è¯ä»·å€¼**: æä¾›ä»¥å‘¨ä¸ºå•ä½çš„æ—¥ç¨‹è§†å›¾ï¼Œæ”¯æŒæ‹–æ‹½è°ƒæ•´å’Œå¿«é€Ÿè§„åˆ’

**æ ¸å¿ƒæ”¶ç›Š**:

- âœ… æ˜¾ç¤ºå®Œæ•´ä¸€å‘¨ï¼ˆå‘¨ä¸€åˆ°å‘¨æ—¥ï¼‰
- âœ… æ‹–æ‹½è°ƒæ•´äº‹ä»¶æ—¶é—´
- âœ… å¿«é€Ÿåˆ‡æ¢å‘¨æ¬¡
- âœ… å¤šæ—¥å†å åŠ æ˜¾ç¤º
- âœ… æ—¶é—´æ§½å¯è§†åŒ–ï¼ˆ30åˆ†é’Ÿç²’åº¦ï¼‰

---

## 2. ç”¨æˆ·ä»·å€¼ä¸åœºæ™¯

### æ ¸å¿ƒåœºæ™¯ 1: æŸ¥çœ‹å‘¨è§†å›¾

**åœºæ™¯æè¿°**:  
ç”¨æˆ·æ‰“å¼€æ—¥ç¨‹æ¨¡å—ï¼Œé»˜è®¤æ˜¾ç¤ºå½“å‰å‘¨çš„æ‰€æœ‰äº‹ä»¶ã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a ç”¨æˆ·
I want æŸ¥çœ‹æœ¬å‘¨æ‰€æœ‰æ—¥ç¨‹
So that äº†è§£æœ¬å‘¨æ•´ä½“å®‰æ’
```

**æ“ä½œæµç¨‹**:

1. ç”¨æˆ·ç‚¹å‡»ä¾§è¾¹æ "æ—¥ç¨‹"å›¾æ ‡
2. ç³»ç»Ÿæ˜¾ç¤ºå‘¨è§†å›¾ï¼ˆé»˜è®¤å½“å‰å‘¨ï¼‰ï¼š

   ```
   æ—¥ç¨‹ - 2025å¹´10æœˆç¬¬3å‘¨
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

   [< ä¸Šå‘¨]  [ä»Šå¤©]  [ä¸‹å‘¨ >]   | [æ—¥] [å‘¨] [æœˆ]  ğŸ” æœç´¢...

   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
            å‘¨ä¸€      å‘¨äºŒ      å‘¨ä¸‰      å‘¨å››      å‘¨äº”      å‘¨å…­      å‘¨æ—¥
            10/14    10/15    10/16    10/17    10/18    10/19    10/20
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   08:00   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ æ™¨ä¼š    â”‚
   08:30   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   09:00   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ é¡¹ç›®è¯„å®¡â”‚ â”‚ Code    â”‚           â”‚ ä¸€å¯¹ä¸€  â”‚
   09:30   â”‚         â”‚ â”‚ Review  â”‚           â”‚         â”‚
   10:00   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   10:30

   11:00                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚ è®¾è®¡è®¨è®ºâ”‚
   11:30                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   12:00   â•â•â•â•â•â•â•â•â•â•â• åˆä¼‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   13:00

   13:30             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   14:00             â”‚ Sprint  â”‚
                     â”‚ Planningâ”‚
   14:30             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   15:00                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   15:30                                   â”‚ æŠ€æœ¯åˆ†äº«â”‚
   16:00                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   16:30

   17:00
   17:30                                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   18:00                                             â”‚ å¥èº«     â”‚
                                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

   å›¾ä¾‹ï¼š ğŸ”µ å·¥ä½œ  ğŸŸ¢ ä¸ªäºº  ğŸŸ¡ ä¼šè®®  ğŸŸ£ å­¦ä¹ 

   æœ¬å‘¨ç»Ÿè®¡ï¼š
   â€¢ æ€»äº‹ä»¶: 17 ä¸ª
   â€¢ å·¥ä½œæ—¶é•¿: 32.5 å°æ—¶
   â€¢ ä¼šè®®æ—¶é•¿: 8 å°æ—¶
   â€¢ ç©ºé—²æ—¶æ®µ: å‘¨ä¸‰ä¸‹åˆã€å‘¨äº”ä¸Šåˆ
   ```

3. æ—¶é—´è½´ç‰¹æ€§ï¼š
   - 24 å°æ—¶åˆ¶ï¼ˆ00:00 - 24:00ï¼‰
   - 30 åˆ†é’Ÿæ—¶é—´æ§½
   - å·¥ä½œæ—¶é—´ï¼ˆ8:00-18:00ï¼‰é«˜äº®æ˜¾ç¤º
   - å½“å‰æ—¶é—´çº¿ï¼ˆçº¢è‰²æ¨ªçº¿ï¼‰
   - è¿‡å»æ—¶é—´æ®µç°è‰²æ˜¾ç¤º

**é¢„æœŸç»“æœ**:

- æ˜¾ç¤ºå®Œæ•´ä¸€å‘¨ 7 å¤©
- æ¯å¤©æ˜¾ç¤ºæ‰€æœ‰äº‹ä»¶
- æ—¶é—´æ§½æ¸…æ™°å¯è¯»
- é¢œè‰²åŒºåˆ†äº‹ä»¶ç±»å‹

---

### æ ¸å¿ƒåœºæ™¯ 2: æ‹–æ‹½è°ƒæ•´äº‹ä»¶

**åœºæ™¯æè¿°**:  
ç”¨æˆ·é€šè¿‡æ‹–æ‹½æ”¹å˜äº‹ä»¶çš„æ—¶é—´æˆ–æ—¥æœŸã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a ç”¨æˆ·
I want æ‹–æ‹½è°ƒæ•´äº‹ä»¶æ—¶é—´
So that å¿«é€Ÿé‡æ–°å®‰æ’æ—¥ç¨‹
```

**æ“ä½œæµç¨‹**:

1. ç”¨æˆ·çœ‹åˆ°å‘¨ä¸‰ 14:00 çš„"Sprint Planning"
2. å‘ç°ä¸å‘¨äº”çš„ä¼šè®®å†²çªï¼Œå†³å®šæŒªåˆ°å‘¨äºŒ
3. ç”¨æˆ·é¼ æ ‡æŒ‰ä½äº‹ä»¶å—ï¼š

   ```
           å‘¨äºŒ      å‘¨ä¸‰      å‘¨å››
           10/15    10/16    10/17
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   13:00

   13:30             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† é¼ æ ‡æŒ‰ä½
   14:00             â”‚ Sprint  â”‚
                     â”‚ Planningâ”‚
   14:30             â”‚ 2h      â”‚
   15:00             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

4. æ‹–åŠ¨åˆ°å‘¨äºŒ 13:30ï¼š

   ```
           å‘¨äºŒ      å‘¨ä¸‰      å‘¨å››
           10/15    10/16    10/17
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   13:00   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ Sprint  â”‚ â† åŠé€æ˜é¢„è§ˆ
   13:30   â”‚ Planningâ”‚
   14:00   â”‚ 2h      â”‚
   14:30   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   15:00             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† åŸä½ç½®è™šçº¿
                     â”‚         â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

5. ç³»ç»Ÿæ£€æµ‹å†²çªï¼š

   ```typescript
   function detectConflict(event: ScheduleEvent, newStart: Date, newEnd: Date): ConflictDetection {
     const overlapping = this.scheduleRepository.findOverlapping({
       userId: event.userId,
       startTime: newStart,
       endTime: newEnd,
       excludeUuid: event.uuid,
     });

     if (overlapping.length > 0) {
       return {
         hasConflict: true,
         conflictingEvents: overlapping,
         severity: calculateSeverity(overlapping),
       };
     }

     return { hasConflict: false };
   }
   ```

6. æ¾å¼€é¼ æ ‡ï¼Œå¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†ï¼š

   ```
   ğŸ“… è°ƒæ•´äº‹ä»¶æ—¶é—´
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   Sprint Planning

   ä»: å‘¨ä¸‰ 10/16 14:00-16:00
   åˆ°: å‘¨äºŒ 10/15 13:30-15:30

   âš ï¸ æ£€æµ‹åˆ°å†²çªï¼š
   â€¢ Code Review (å‘¨äºŒ 13:00-14:00)
     é‡å  30 åˆ†é’Ÿ

   [ä»ç„¶ç§»åŠ¨]  [è°ƒæ•´æ—¶é—´]  [å–æ¶ˆ]
   ```

7. ç”¨æˆ·é€‰æ‹©"è°ƒæ•´æ—¶é—´"
8. ç³»ç»Ÿè‡ªåŠ¨å»ºè®®ï¼š

   ```
   å»ºè®®æ—¶é—´ï¼š
   ğŸŸ¢ å‘¨äºŒ 15:30-17:30 (æ— å†²çª)
   ğŸŸ¢ å‘¨å›› 13:00-15:00 (æ— å†²çª)
   ğŸŸ¡ å‘¨äº” 10:00-12:00 (ä¸åˆé¤ç›¸é‚»)

   [åº”ç”¨å»ºè®®]  [æ‰‹åŠ¨è°ƒæ•´]
   ```

**é¢„æœŸç»“æœ**:

- æ‹–æ‹½æµç•…ï¼Œå®æ—¶é¢„è§ˆ
- è‡ªåŠ¨æ£€æµ‹å†²çª
- æä¾›æ™ºèƒ½å»ºè®®
- æ”¯æŒè·¨å¤©æ‹–æ‹½

---

### æ ¸å¿ƒåœºæ™¯ 3: å¿«é€Ÿåˆ›å»ºäº‹ä»¶

**åœºæ™¯æè¿°**:  
ç”¨æˆ·ç›´æ¥åœ¨å‘¨è§†å›¾ä¸Šç‚¹å‡»æ—¶é—´æ§½åˆ›å»ºäº‹ä»¶ã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a ç”¨æˆ·
I want åœ¨å‘¨è§†å›¾ä¸Šå¿«é€Ÿåˆ›å»ºäº‹ä»¶
So that å‡å°‘ç‚¹å‡»æ­¥éª¤
```

**æ“ä½œæµç¨‹**:

1. ç”¨æˆ·çœ‹åˆ°å‘¨å›› 15:00 æœ‰ç©ºé—²
2. åŒå‡»å‘¨å›› 15:00 æ—¶é—´æ§½ï¼š

   ```
            å‘¨å››
            10/17
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   14:30

   15:00   âœ¨ â† åŒå‡»è¿™é‡Œ

   15:30
   ```

3. å¼¹å‡ºå¿«é€Ÿåˆ›å»ºé¢æ¿ï¼š

   ```
   âš¡ å¿«é€Ÿåˆ›å»ºäº‹ä»¶
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   æ ‡é¢˜: [è¾“å…¥äº‹ä»¶æ ‡é¢˜...]

   æ—¶é—´: å‘¨å›› 10/17
   ä»: [15:00 â–¼]  åˆ°: [16:00 â–¼]

   ç±»å‹: ğŸ”µ å·¥ä½œ  ğŸŸ¢ ä¸ªäºº  ğŸŸ¡ ä¼šè®®  ğŸŸ£ å­¦ä¹ 

   [åˆ›å»º]  [è¯¦ç»†è®¾ç½®]  [å–æ¶ˆ]
   ```

4. ç”¨æˆ·è¾“å…¥"å›¢é˜Ÿå»ºè®¾æ´»åŠ¨"
5. é€‰æ‹©ç±»å‹"ä¸ªäºº"
6. è°ƒæ•´ç»“æŸæ—¶é—´åˆ° 18:00
7. ç‚¹å‡»"åˆ›å»º"
8. äº‹ä»¶ç«‹å³æ˜¾ç¤ºåœ¨å‘¨è§†å›¾ä¸Šï¼š

   ```
            å‘¨å››
            10/17
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   14:30

   15:00   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ å›¢é˜Ÿå»ºè®¾â”‚
   15:30   â”‚ æ´»åŠ¨    â”‚
           â”‚         â”‚
   16:00   â”‚ 3h      â”‚
           â”‚         â”‚
   16:30   â”‚ ğŸŸ¢      â”‚
           â”‚         â”‚
   17:00   â”‚         â”‚
   17:30   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

**é¢„æœŸç»“æœ**:

- åŒå‡»å¿«é€Ÿåˆ›å»º
- é»˜è®¤ 1 å°æ—¶æ—¶é•¿
- è‡ªåŠ¨å¯¹é½æ—¶é—´æ§½
- æ”¯æŒå¿«æ·é”®ï¼ˆEnter ç¡®è®¤ï¼ŒEsc å–æ¶ˆï¼‰

---

### æ ¸å¿ƒåœºæ™¯ 4: å‘¨æ¬¡åˆ‡æ¢ä¸å¯¼èˆª

**åœºæ™¯æè¿°**:  
ç”¨æˆ·å¿«é€Ÿåˆ‡æ¢ä¸åŒå‘¨æ¬¡ï¼ŒæŸ¥çœ‹è¿‡å»æˆ–æœªæ¥æ—¥ç¨‹ã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a ç”¨æˆ·
I want å¿«é€Ÿåˆ‡æ¢ä¸åŒå‘¨æ¬¡
So that æŸ¥çœ‹å†å²æˆ–è§„åˆ’æœªæ¥
```

**æ“ä½œæµç¨‹**:

1. å½“å‰æ˜¾ç¤º 2025-W42ï¼ˆ10æœˆç¬¬3å‘¨ï¼‰
2. ç”¨æˆ·ç‚¹å‡»"ä¸‹å‘¨ >"æŒ‰é’®
3. ç³»ç»Ÿåˆ‡æ¢åˆ° 2025-W43ï¼š

   ```typescript
   function navigateWeek(direction: 'prev' | 'next'): void {
     const currentWeek = this.currentWeek;

     if (direction === 'next') {
       this.currentWeek = addWeeks(currentWeek, 1);
     } else {
       this.currentWeek = subWeeks(currentWeek, 1);
     }

     // åŠ è½½æ–°å‘¨çš„äº‹ä»¶
     await this.loadWeekEvents(this.currentWeek);

     // æ›´æ–° URLï¼ˆæ”¯æŒæµè§ˆå™¨å‰è¿›/åé€€ï¼‰
     this.router.push({
       query: { week: formatISO(this.currentWeek, { representation: 'date' }) },
     });
   }
   ```

4. é¡µé¢æ›´æ–°æ˜¾ç¤ºï¼š

   ```
   æ—¥ç¨‹ - 2025å¹´10æœˆç¬¬4å‘¨
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

   [< ä¸Šå‘¨]  [ä»Šå¤©]  [ä¸‹å‘¨ >]

   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
            å‘¨ä¸€      å‘¨äºŒ      å‘¨ä¸‰      å‘¨å››      å‘¨äº”      å‘¨å…­      å‘¨æ—¥
            10/21    10/22    10/23    10/24    10/25    10/26    10/27
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   åŠ è½½ä¸­...
   ```

5. ç”¨æˆ·æƒ³å›åˆ°æœ¬å‘¨ï¼Œç‚¹å‡»"ä»Šå¤©"æŒ‰é’®
6. ç«‹å³è·³è½¬åˆ°å½“å‰å‘¨ï¼Œå¹¶æ»šåŠ¨åˆ°å½“å‰æ—¶é—´

**å¿«æ·é”®æ”¯æŒ**:

```
â† å·¦ç®­å¤´: ä¸Šä¸€å‘¨
â†’ å³ç®­å¤´: ä¸‹ä¸€å‘¨
T: å›åˆ°ä»Šå¤©ï¼ˆTodayï¼‰
W: åˆ‡æ¢åˆ°å‘¨è§†å›¾ï¼ˆWeekï¼‰
```

**é¢„æœŸç»“æœ**:

- æµç•…åˆ‡æ¢å‘¨æ¬¡
- æ”¯æŒå¿«æ·é”®å¯¼èˆª
- URL åŒæ­¥ï¼ˆæ”¯æŒåˆ†äº«å’Œä¹¦ç­¾ï¼‰
- è‡ªåŠ¨æ»šåŠ¨åˆ°ç›¸å…³æ—¶é—´

---

### æ ¸å¿ƒåœºæ™¯ 5: å¤šæ—¥å†å åŠ æ˜¾ç¤º

**åœºæ™¯æè¿°**:  
ç”¨æˆ·åŒæ—¶æŸ¥çœ‹å¤šä¸ªæ—¥å†ï¼ˆä¸ªäººã€å·¥ä½œã€é¡¹ç›®ï¼‰çš„äº‹ä»¶ã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a ç”¨æˆ·
I want åŒæ—¶æ˜¾ç¤ºå¤šä¸ªæ—¥å†
So that å…¨é¢äº†è§£æ‰€æœ‰æ—¥ç¨‹
```

**æ“ä½œæµç¨‹**:

1. ç”¨æˆ·æ‰“å¼€æ—¥å†é€‰æ‹©å™¨ï¼š

   ```
   ğŸ“… æ—¥å†
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   æˆ‘çš„æ—¥å†ï¼š
   â˜‘ï¸ ğŸ”µ ä¸ªäººæ—¥å† (23 äº‹ä»¶)
   â˜‘ï¸ ğŸŸ¡ å·¥ä½œæ—¥å† (15 äº‹ä»¶)
   â˜ ğŸŸ£ å­¦ä¹ è®¡åˆ’ (8 äº‹ä»¶)

   å…±äº«æ—¥å†ï¼š
   â˜‘ï¸ ğŸŸ¢ å›¢é˜Ÿæ—¥å† (12 äº‹ä»¶)
   â˜ ğŸŸ  é¡¹ç›® Alpha (6 äº‹ä»¶)

   å¤–éƒ¨æ—¥å†ï¼š
   â˜‘ï¸ ğŸ“§ Google æ—¥å† (å·²åŒæ­¥)
   â˜ ğŸ“§ Outlook æ—¥å† (æœªè¿æ¥)

   [ç®¡ç†æ—¥å†]
   ```

2. ç”¨æˆ·å‹¾é€‰"å­¦ä¹ è®¡åˆ’"
3. å‘¨è§†å›¾ç«‹å³æ›´æ–°ï¼Œæ˜¾ç¤ºæ‰€æœ‰å‹¾é€‰æ—¥å†çš„äº‹ä»¶ï¼š

   ```
            å‘¨ä¸€      å‘¨äºŒ      å‘¨ä¸‰
            10/14    10/15    10/16
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   08:00   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ğŸ”µ æ™¨ä¼š  â”‚ â† ä¸ªäºº
   08:30   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   09:00   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ğŸŸ¡ é¡¹ç›®  â”‚ â”‚ğŸŸ¢ ç«™ä¼š  â”‚ â† å·¥ä½œ + å›¢é˜Ÿ
   09:30   â”‚  è¯„å®¡   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   10:00   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   10:30             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   11:00             â”‚ğŸŸ£ ç®—æ³•  â”‚ â† æ–°å¢ï¼šå­¦ä¹ 
                     â”‚  è¯¾ç¨‹   â”‚
   11:30             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

4. äº‹ä»¶å—æ˜¾ç¤ºå¯¹åº”æ—¥å†é¢œè‰²
5. æ”¯æŒæŒ‰æ—¥å†ç­›é€‰ï¼š
   ```typescript
   function filterByCalendars(
     events: ScheduleEvent[],
     selectedCalendars: string[],
   ): ScheduleEvent[] {
     return events.filter((event) => selectedCalendars.includes(event.calendarUuid));
   }
   ```

**é¢„æœŸç»“æœ**:

- å¤šæ—¥å†äº‹ä»¶å åŠ æ˜¾ç¤º
- é¢œè‰²åŒºåˆ†ä¸åŒæ—¥å†
- æ”¯æŒå¿«é€Ÿåˆ‡æ¢æ˜¾ç¤º
- æ€§èƒ½ä¼˜åŒ–ï¼ˆå¤§é‡äº‹ä»¶ï¼‰

---

### æ ¸å¿ƒåœºæ™¯ 6: å‘¨ç»Ÿè®¡ä¸æ´å¯Ÿ

**åœºæ™¯æè¿°**:  
ç”¨æˆ·æŸ¥çœ‹æœ¬å‘¨æ—¥ç¨‹ç»Ÿè®¡ï¼Œè·å¾—æ—¶é—´åˆ†é…æ´å¯Ÿã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a ç”¨æˆ·
I want æŸ¥çœ‹æœ¬å‘¨æ—¶é—´ç»Ÿè®¡
So that äº†è§£æ—¶é—´åˆ†é…æ˜¯å¦åˆç†
```

**æ“ä½œæµç¨‹**:

1. ç”¨æˆ·ç‚¹å‡»å‘¨è§†å›¾å³ä¸Šè§’"ç»Ÿè®¡"å›¾æ ‡
2. å¼¹å‡ºæœ¬å‘¨ç»Ÿè®¡é¢æ¿ï¼š

   ```
   ğŸ“Š æœ¬å‘¨ç»Ÿè®¡ (10/14 - 10/20)
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

   â±ï¸ æ—¶é—´åˆ†é…
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   æ€»è®¡: 52.5 å°æ—¶

   ğŸŸ¡ ä¼šè®®        18h (34%)  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
   ğŸ”µ æ·±åº¦å·¥ä½œ    24h (46%)  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘
   ğŸŸ¢ ä¸ªäººäº‹åŠ¡     6h (11%)  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
   ğŸŸ£ å­¦ä¹ å‘å±•    4.5h (9%)  â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘

   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸ“ˆ è¶‹åŠ¿å¯¹æ¯”
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   vs ä¸Šå‘¨:
   â€¢ ä¼šè®®æ—¶é—´ +3h â¬†ï¸ (è¿‡å¤š)
   â€¢ æ·±åº¦å·¥ä½œ -2h â¬‡ï¸ (éœ€è¦ä¿æŠ¤)
   â€¢ å­¦ä¹ æ—¶é—´ +1.5h â¬†ï¸ (ç»§ç»­ä¿æŒ)

   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   âš¡ æ•ˆç‡æ´å¯Ÿ
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   â€¢ æœ€ä½³å·¥ä½œæ—¶æ®µ: å‘¨äºŒ/å‘¨å››ä¸Šåˆ
   â€¢ ä¼šè®®å¯†é›†æ—¶æ®µ: å‘¨ä¸€å…¨å¤©
   â€¢ å»ºè®®: å‘¨ä¸‰ä¸‹åˆé€‚åˆå®‰æ’æ·±åº¦å·¥ä½œ

   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ğŸ¯ æœ¬å‘¨ç›®æ ‡
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   â˜ å®Œæˆé¡¹ç›®è¯„å®¡ (å·²æ’æœŸ: å‘¨ä¸€)
   â˜‘ï¸ å­¦ä¹ æ–°æŠ€æœ¯ 4h (å·²å®Œæˆ)
   â˜ å¥èº« 3 æ¬¡ (å·²æ’æœŸ 2 æ¬¡)

   [å¯¼å‡ºæŠ¥å‘Š]  [ä¼˜åŒ–å»ºè®®]
   ```

3. ç”¨æˆ·ç‚¹å‡»"ä¼˜åŒ–å»ºè®®"
4. ç³»ç»Ÿæä¾›æ™ºèƒ½å»ºè®®ï¼š

   ```
   ğŸ’¡ æœ¬å‘¨æ—¥ç¨‹ä¼˜åŒ–å»ºè®®
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

   1. âš ï¸ å‘¨ä¸€ä¼šè®®è¿‡å¤šï¼ˆ5ä¸ªï¼‰
      å»ºè®®: åˆå¹¶éƒ¨åˆ†ä¾‹ä¼šï¼Œæˆ–æ”¹ä¸ºå¼‚æ­¥æ²Ÿé€š

   2. ğŸ”„ ç¼ºå°‘è¿ç»­æ·±åº¦å·¥ä½œæ—¶é—´
      å»ºè®®: å‘¨ä¸‰ä¸‹åˆä¿ç•™ 3 å°æ—¶ä¸è¢«æ‰“æ–­

   3. â° åˆé¤æ—¶é—´ä¸å›ºå®š
      å»ºè®®: å›ºå®š 12:00-13:00 ä¸ºåˆä¼‘æ—¶é—´

   4. ğŸ“š å­¦ä¹ æ—¶é—´åˆ†æ•£
      å»ºè®®: é›†ä¸­åˆ°å‘¨æœ«æ—©æ™¨

   [ä¸€é”®ä¼˜åŒ–]  [æ‰‹åŠ¨è°ƒæ•´]
   ```

**é¢„æœŸç»“æœ**:

- æ¸…æ™°çš„æ—¶é—´åˆ†é…ç»Ÿè®¡
- ä¸å†å²å¯¹æ¯”
- æ™ºèƒ½æ´å¯Ÿå’Œå»ºè®®
- æ”¯æŒå¯¼å‡ºæŠ¥å‘Š

---

## 3. è®¾è®¡è¦ç‚¹

### æ¶‰åŠå­—æ®µï¼ˆå¯¹é½ Contractsï¼‰

#### æ— éœ€æ–°å¢å®ä½“ï¼ˆå¤ç”¨ç°æœ‰ ScheduleEventï¼‰

**ä½ç½®**: `packages/contracts/src/modules/schedule/entities/ScheduleEventServer.ts`

å·²æœ‰å­—æ®µè¶³å¤Ÿæ”¯æŒå‘¨è§†å›¾ï¼š

```typescript
export interface ScheduleEventServerDTO {
  // æ—¶é—´ç›¸å…³
  readonly startTime: number; // ç”¨äºå®šä½åˆ°å‘¨çš„å“ªä¸€å¤©
  readonly endTime: number; // ç”¨äºè®¡ç®—äº‹ä»¶æ—¶é•¿
  readonly isAllDay: boolean; // å…¨å¤©äº‹ä»¶æ˜¾ç¤ºåœ¨é¡¶éƒ¨

  // æ˜¾ç¤ºç›¸å…³
  readonly title: string; // äº‹ä»¶æ ‡é¢˜
  readonly description?: string; // é¼ æ ‡æ‚¬åœæ˜¾ç¤º
  readonly color?: string; // è‡ªå®šä¹‰é¢œè‰²
  readonly calendarUuid?: string; // ç”¨äºå¤šæ—¥å†è¿‡æ»¤

  // å†²çªæ£€æµ‹
  readonly conflictDetection?: ConflictDetection;
}
```

#### æ–°å¢å‰ç«¯çŠ¶æ€æ¥å£ï¼ˆä»…å‰ç«¯ä½¿ç”¨ï¼‰

```typescript
// apps/web/src/modules/schedule/types/week-view.ts
export interface WeekViewState {
  readonly currentWeek: Date; // å½“å‰æ˜¾ç¤ºçš„å‘¨
  readonly selectedCalendars: string[]; // å·²é€‰ä¸­çš„æ—¥å†
  readonly viewConfig: WeekViewConfig; // è§†å›¾é…ç½®
  readonly isDragging: boolean; // æ˜¯å¦æ­£åœ¨æ‹–æ‹½
  readonly dragPreview?: DragPreview; // æ‹–æ‹½é¢„è§ˆ
}

export interface WeekViewConfig {
  readonly startHour: number; // å¼€å§‹æ˜¾ç¤ºæ—¶é—´ï¼ˆé»˜è®¤ 6ï¼‰
  readonly endHour: number; // ç»“æŸæ˜¾ç¤ºæ—¶é—´ï¼ˆé»˜è®¤ 22ï¼‰
  readonly timeSlotHeight: number; // æ—¶é—´æ§½é«˜åº¦ï¼ˆpxï¼‰
  readonly firstDayOfWeek: 0 | 1; // å‘¨ä¸€æˆ–å‘¨æ—¥å¼€å§‹
  readonly showWeekend: boolean; // æ˜¯å¦æ˜¾ç¤ºå‘¨æœ«
}

export interface DragPreview {
  readonly eventUuid: string;
  readonly originalStart: Date;
  readonly originalEnd: Date;
  readonly newStart: Date;
  readonly newEnd: Date;
  readonly hasConflict: boolean;
}
```

---

### äº¤äº’è®¾è®¡

#### 1. æ—¶é—´æ§½è®¾è®¡

| ç²’åº¦    | é«˜åº¦ | ä½¿ç”¨åœºæ™¯             |
| ------- | ---- | -------------------- |
| 30 åˆ†é’Ÿ | 40px | é»˜è®¤ï¼Œé€‚åˆå¤§éƒ¨åˆ†äº‹ä»¶ |
| 15 åˆ†é’Ÿ | 20px | ç²¾ç»†è°ƒæ•´ï¼ˆå¯ç¼©æ”¾ï¼‰   |
| 1 å°æ—¶  | 80px | æ¦‚è§ˆæ¨¡å¼ï¼ˆå°‘æ•°äº‹ä»¶ï¼‰ |

#### 2. æ‹–æ‹½è¡Œä¸º

```typescript
// æ‹–æ‹½é€»è¾‘
function handleDrag(event: MouseEvent, scheduleEvent: ScheduleEvent) {
  // 1. è®¡ç®—é¼ æ ‡ç§»åŠ¨è·ç¦»
  const deltaX = event.clientX - dragStart.x;
  const deltaY = event.clientY - dragStart.y;

  // 2. è½¬æ¢ä¸ºæ—¥æœŸå’Œæ—¶é—´åç§»
  const dayOffset = Math.floor(deltaX / DAY_WIDTH);
  const timeOffset = Math.floor(deltaY / SLOT_HEIGHT) * SLOT_DURATION;

  // 3. è®¡ç®—æ–°æ—¶é—´
  const newStart = addMinutes(addDays(originalStart, dayOffset), timeOffset);
  const newEnd = addMinutes(newStart, duration);

  // 4. å¯¹é½åˆ°æ—¶é—´æ§½
  const alignedStart = roundToNearestMinutes(newStart, { nearestTo: 30 });
  const alignedEnd = addMinutes(alignedStart, duration);

  // 5. æ£€æµ‹å†²çª
  const conflict = detectConflict(scheduleEvent, alignedStart, alignedEnd);

  // 6. æ›´æ–°é¢„è§ˆ
  updateDragPreview({
    newStart: alignedStart,
    newEnd: alignedEnd,
    hasConflict: conflict.hasConflict,
  });
}
```

#### 3. è§†å›¾æ€§èƒ½ä¼˜åŒ–

```typescript
// è™šæ‹Ÿæ»šåŠ¨ï¼ˆä»…æ¸²æŸ“å¯è§æ—¶é—´æ®µï¼‰
function getVisibleTimeRange(): { start: number; end: number } {
  const scrollTop = scrollContainer.scrollTop;
  const viewportHeight = scrollContainer.clientHeight;

  const startHour = Math.floor(scrollTop / HOUR_HEIGHT);
  const endHour = Math.ceil((scrollTop + viewportHeight) / HOUR_HEIGHT);

  return {
    start: Math.max(0, startHour - 1), // é¢„æ¸²æŸ“ä¸Šæ–¹ 1 å°æ—¶
    end: Math.min(24, endHour + 1), // é¢„æ¸²æŸ“ä¸‹æ–¹ 1 å°æ—¶
  };
}

// äº‹ä»¶å»é‡ä¸åˆå¹¶ï¼ˆå¤šæ—¥å†ï¼‰
function deduplicateEvents(events: ScheduleEvent[]): ScheduleEvent[] {
  const seen = new Map<string, ScheduleEvent>();

  for (const event of events) {
    // ä½¿ç”¨ sourceEventId å»é‡ï¼ˆå¤–éƒ¨æ—¥å†åŒæ­¥ï¼‰
    const key = event.sourceEventId || event.uuid;

    if (!seen.has(key)) {
      seen.set(key, event);
    }
  }

  return Array.from(seen.values());
}
```

---

## 4. MVP/MMP/Full è·¯å¾„

### MVP: åŸºç¡€å‘¨è§†å›¾ï¼ˆ1.5-2 å‘¨ï¼‰

**èŒƒå›´**:

- âœ… æ˜¾ç¤ºå½“å‰å‘¨ 7 å¤©
- âœ… æ—¶é—´æ§½å¸ƒå±€ï¼ˆ30åˆ†é’Ÿç²’åº¦ï¼‰
- âœ… äº‹ä»¶æ¸²æŸ“ï¼ˆæ ‡é¢˜ã€æ—¶é—´ã€é¢œè‰²ï¼‰
- âœ… å‘¨æ¬¡å¯¼èˆªï¼ˆä¸Šä¸€å‘¨/ä¸‹ä¸€å‘¨/ä»Šå¤©ï¼‰
- âœ… åŒå‡»åˆ›å»ºäº‹ä»¶
- âœ… ç‚¹å‡»äº‹ä»¶æŸ¥çœ‹è¯¦æƒ…

**æŠ€æœ¯è¦ç‚¹**:

- CSS Grid å¸ƒå±€ï¼ˆ7åˆ— Ã— 48è¡Œï¼‰
- äº‹ä»¶å®šä½ç®—æ³•ï¼ˆæ—¶é—´ â†’ åƒç´ åæ ‡ï¼‰
- å‘¨æ¬¡è®¡ç®—ï¼ˆISO 8601ï¼‰

**éªŒæ”¶æ ‡å‡†**:

```gherkin
Given å½“å‰æ˜¯ 2025-10-15ï¼ˆå‘¨ä¸‰ï¼‰
When ç”¨æˆ·æ‰“å¼€å‘¨è§†å›¾
Then åº”æ˜¾ç¤º 10/14-10/20 è¿™ä¸€å‘¨
And æ˜¾ç¤ºæ‰€æœ‰äº‹ä»¶
```

---

### MMP: æ‹–æ‹½ä¸å¤šæ—¥å†ï¼ˆ+1 å‘¨ï¼‰

**åœ¨ MVP åŸºç¡€ä¸Šæ–°å¢**:

- âœ… æ‹–æ‹½è°ƒæ•´äº‹ä»¶æ—¶é—´
- âœ… æ‹–æ‹½è°ƒæ•´äº‹ä»¶æ—¶é•¿ï¼ˆæ‹–åŠ¨è¾¹ç¼˜ï¼‰
- âœ… å†²çªæ£€æµ‹ä¸æç¤º
- âœ… å¤šæ—¥å†åˆ‡æ¢
- âœ… å…¨å¤©äº‹ä»¶æ˜¾ç¤º
- âœ… å¿«æ·é”®æ”¯æŒ

**æŠ€æœ¯è¦ç‚¹**:

- Drag & Drop API
- å†²çªæ£€æµ‹ç®—æ³•
- å¤šæ—¥å†è¿‡æ»¤é€»è¾‘

**éªŒæ”¶æ ‡å‡†**:

```gherkin
Given ç”¨æˆ·æ­£åœ¨æŸ¥çœ‹å‘¨è§†å›¾
When æ‹–åŠ¨äº‹ä»¶åˆ°æ–°æ—¶é—´
And æ–°æ—¶é—´æœ‰å†²çª
Then åº”æ˜¾ç¤ºå†²çªæç¤º
And æä¾›è°ƒæ•´å»ºè®®
```

---

### Full Release: æ™ºèƒ½ç»Ÿè®¡ä¸ä¼˜åŒ–ï¼ˆ+1 å‘¨ï¼‰

**åœ¨ MMP åŸºç¡€ä¸Šæ–°å¢**:

- âœ… å‘¨ç»Ÿè®¡é¢æ¿
- âœ… æ—¶é—´åˆ†é…åˆ†æ
- âœ… æ™ºèƒ½ä¼˜åŒ–å»ºè®®
- âœ… å¯¼å‡ºå‘¨æŠ¥
- âœ… è‡ªå®šä¹‰è§†å›¾é…ç½®
- âœ… å‘¨æœŸäº‹ä»¶é‡å¤æ˜¾ç¤º

**æŠ€æœ¯è¦ç‚¹**:

- ç»Ÿè®¡ç®—æ³•
- æ—¶é—´æ¨¡å¼è¯†åˆ«
- æŠ¥å‘Šç”Ÿæˆ

**éªŒæ”¶æ ‡å‡†**:

```gherkin
Given æœ¬å‘¨æœ‰ 30 ä¸ªäº‹ä»¶
When ç”¨æˆ·æŸ¥çœ‹å‘¨ç»Ÿè®¡
Then åº”æ˜¾ç¤ºæ—¶é—´åˆ†é…é¥¼å›¾
And æä¾›ä¼˜åŒ–å»ºè®®
```

---

## 5. éªŒæ”¶æ ‡å‡†ï¼ˆGherkinï¼‰

### Feature: æ—¥ç¨‹å‘¨è§†å›¾

#### Scenario 1: æ˜¾ç¤ºå½“å‰å‘¨

```gherkin
Feature: æ—¥ç¨‹å‘¨è§†å›¾
  ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›æŸ¥çœ‹ä¸€å‘¨çš„æ—¥ç¨‹å®‰æ’

  Background:
    Given ç”¨æˆ·"éƒ‘å"å·²ç™»å½•
    And å½“å‰æ—¥æœŸæ˜¯ 2025-10-15ï¼ˆå‘¨ä¸‰ï¼‰
    And ç”¨æˆ·æœ‰ä»¥ä¸‹äº‹ä»¶ï¼š
      | title    | startTime          | endTime            |
      | æ™¨ä¼š     | 2025-10-14 08:00  | 2025-10-14 08:30  |
      | é¡¹ç›®è¯„å®¡ | 2025-10-14 09:00  | 2025-10-14 10:00  |
      | ç«™ä¼š     | 2025-10-15 09:00  | 2025-10-15 09:30  |

  Scenario: æ‰“å¼€å‘¨è§†å›¾
    When ç”¨æˆ·æ‰“å¼€æ—¥ç¨‹æ¨¡å—
    Then åº”æ˜¾ç¤ºå‘¨è§†å›¾
    And åº”æ˜¾ç¤º 2025-W42ï¼ˆ10/14-10/20ï¼‰
    And åº”æ˜¾ç¤ºæ‰€æœ‰ 3 ä¸ªäº‹ä»¶
    And äº‹ä»¶åº”æŒ‰æ—¶é—´æ’åˆ—
    And å½“å‰æ—¶é—´çº¿åº”å¯è§ï¼ˆçº¢çº¿ï¼‰
```

---

#### Scenario 2: æ‹–æ‹½è°ƒæ•´äº‹ä»¶

```gherkin
  Background:
    Given ç”¨æˆ·åœ¨å‘¨è§†å›¾
    And äº‹ä»¶"é¡¹ç›®è¯„å®¡"åœ¨å‘¨ä¸€ 09:00

  Scenario: æ‹–åŠ¨åˆ°æ–°æ—¶é—´ï¼ˆæ— å†²çªï¼‰
    When ç”¨æˆ·æ‹–åŠ¨"é¡¹ç›®è¯„å®¡"åˆ°å‘¨äºŒ 14:00
    Then åº”æ˜¾ç¤ºæ‹–æ‹½é¢„è§ˆï¼ˆåŠé€æ˜ï¼‰
    And åŸä½ç½®æ˜¾ç¤ºè™šçº¿å ä½
    When ç”¨æˆ·æ¾å¼€é¼ æ ‡
    Then åº”æ›´æ–°äº‹ä»¶æ—¶é—´ä¸ºï¼š
      | å­—æ®µ      | å€¼                |
      | startTime | 2025-10-15 14:00 |
      | endTime   | 2025-10-15 15:00 |
    And äº‹ä»¶åº”æ˜¾ç¤ºåœ¨æ–°ä½ç½®

  Scenario: æ‹–åŠ¨åˆ°æ–°æ—¶é—´ï¼ˆæœ‰å†²çªï¼‰
    Given å‘¨äºŒ 14:00 å·²æœ‰äº‹ä»¶"ç«™ä¼š"
    When ç”¨æˆ·æ‹–åŠ¨"é¡¹ç›®è¯„å®¡"åˆ°å‘¨äºŒ 14:00
    Then æ‹–æ‹½é¢„è§ˆåº”æ˜¾ç¤ºä¸ºçº¢è‰²ï¼ˆå†²çªï¼‰
    When ç”¨æˆ·æ¾å¼€é¼ æ ‡
    Then åº”å¼¹å‡ºå†²çªæç¤º
    And æç¤ºï¼š"ä¸ç«™ä¼šå†²çª 30 åˆ†é’Ÿ"
    And æä¾›é€‰é¡¹ï¼š["ä»ç„¶ç§»åŠ¨", "è°ƒæ•´æ—¶é—´", "å–æ¶ˆ"]
```

---

#### Scenario 3: å¿«é€Ÿåˆ›å»ºäº‹ä»¶

```gherkin
  Background:
    Given ç”¨æˆ·åœ¨å‘¨è§†å›¾
    And å‘¨å›› 15:00 æ—¶é—´æ§½ä¸ºç©º

  Scenario: åŒå‡»åˆ›å»ºäº‹ä»¶
    When ç”¨æˆ·åŒå‡»å‘¨å›› 15:00 æ—¶é—´æ§½
    Then åº”å¼¹å‡ºå¿«é€Ÿåˆ›å»ºé¢æ¿
    And é»˜è®¤æ—¶é—´ä¸º 15:00-16:00
    And é»˜è®¤æ—¥æœŸä¸ºå‘¨å›› 10/17
    When ç”¨æˆ·è¾“å…¥æ ‡é¢˜"å›¢é˜Ÿä¼šè®®"
    And ç‚¹å‡»"åˆ›å»º"
    Then åº”åˆ›å»ºäº‹ä»¶
    And äº‹ä»¶åº”ç«‹å³æ˜¾ç¤ºåœ¨å‘¨è§†å›¾
```

---

#### Scenario 4: å‘¨æ¬¡å¯¼èˆª

```gherkin
  Background:
    Given ç”¨æˆ·åœ¨å‘¨è§†å›¾
    And å½“å‰æ˜¾ç¤º 2025-W42ï¼ˆ10/14-10/20ï¼‰

  Scenario: åˆ‡æ¢åˆ°ä¸‹ä¸€å‘¨
    When ç”¨æˆ·ç‚¹å‡»"ä¸‹å‘¨ >"
    Then åº”æ˜¾ç¤º 2025-W43ï¼ˆ10/21-10/27ï¼‰
    And åº”åŠ è½½è¯¥å‘¨çš„äº‹ä»¶
    And URL åº”æ›´æ–°ä¸º ?week=2025-W43

  Scenario: å›åˆ°ä»Šå¤©
    When ç”¨æˆ·ç‚¹å‡»"ä»Šå¤©"
    Then åº”è·³è½¬åˆ°å½“å‰å‘¨
    And åº”æ»šåŠ¨åˆ°å½“å‰æ—¶é—´
```

---

#### Scenario 5: å¤šæ—¥å†æ˜¾ç¤º

```gherkin
  Background:
    Given ç”¨æˆ·æœ‰ 3 ä¸ªæ—¥å†ï¼š
      | name     | color  | eventCount |
      | ä¸ªäººæ—¥å† | blue   | 10         |
      | å·¥ä½œæ—¥å† | orange | 8          |
      | å­¦ä¹ è®¡åˆ’ | purple | 5          |
    And é»˜è®¤é€‰ä¸­"ä¸ªäºº"å’Œ"å·¥ä½œ"

  Scenario: åˆ‡æ¢æ—¥å†æ˜¾ç¤º
    When ç”¨æˆ·æ‰“å¼€æ—¥å†é€‰æ‹©å™¨
    Then åº”æ˜¾ç¤ºæ‰€æœ‰æ—¥å†
    And "ä¸ªäºº"å’Œ"å·¥ä½œ"åº”è¢«å‹¾é€‰
    When ç”¨æˆ·å‹¾é€‰"å­¦ä¹ è®¡åˆ’"
    Then å‘¨è§†å›¾åº”ç«‹å³æ›´æ–°
    And åº”æ˜¾ç¤ºæ‰€æœ‰ 3 ä¸ªæ—¥å†çš„äº‹ä»¶ï¼ˆå…± 23 ä¸ªï¼‰
    And äº‹ä»¶åº”æŒ‰æ—¥å†é¢œè‰²æ˜¾ç¤º
```

---

#### Scenario 6: å‘¨ç»Ÿè®¡

```gherkin
  Background:
    Given æœ¬å‘¨æœ‰ä»¥ä¸‹äº‹ä»¶ï¼š
      | type   | duration |
      | ä¼šè®®   | 18h      |
      | å·¥ä½œ   | 24h      |
      | ä¸ªäºº   | 6h       |
      | å­¦ä¹    | 4h       |

  Scenario: æŸ¥çœ‹å‘¨ç»Ÿè®¡
    When ç”¨æˆ·ç‚¹å‡»"ç»Ÿè®¡"å›¾æ ‡
    Then åº”æ˜¾ç¤ºç»Ÿè®¡é¢æ¿
    And åº”æ˜¾ç¤ºæ€»æ—¶é•¿ 52h
    And åº”æ˜¾ç¤ºå„ç±»å‹å æ¯”ï¼š
      | ç±»å‹ | å æ¯” |
      | å·¥ä½œ | 46%  |
      | ä¼šè®® | 34%  |
      | ä¸ªäºº | 12%  |
      | å­¦ä¹  | 8%   |
    And åº”æä¾›"vs ä¸Šå‘¨"å¯¹æ¯”
```

---

## 6. æŒ‡æ ‡ä¸è¿½è¸ª

### äº‹ä»¶åŸ‹ç‚¹

```typescript
// æŸ¥çœ‹å‘¨è§†å›¾
{
  event: 'week_view_opened',
  properties: {
    week: string,              // '2025-W42'
    eventCount: number,
    selectedCalendars: string[]
  }
}

// æ‹–æ‹½äº‹ä»¶
{
  event: 'event_dragged',
  properties: {
    oldDay: string,
    newDay: string,
    timeDelta: number,         // åˆ†é’Ÿ
    hadConflict: boolean
  }
}

// å¿«é€Ÿåˆ›å»º
{
  event: 'event_quick_created',
  properties: {
    source: 'double_click' | 'drag_select',
    duration: number
  }
}

// å‘¨æ¬¡å¯¼èˆª
{
  event: 'week_navigated',
  properties: {
    direction: 'prev' | 'next' | 'today',
    weeksOffset: number        // ç›¸å¯¹å½“å‰å‘¨
  }
}
```

---

### æˆåŠŸæŒ‡æ ‡

**å®šé‡æŒ‡æ ‡**:
| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹å¼ |
|------|-------|---------|
| å‘¨è§†å›¾ä½¿ç”¨ç‡ | >60% | å‘¨è§†å›¾æ‰“å¼€æ¬¡æ•° / æ—¥ç¨‹æ¨¡å—æ€»æ‰“å¼€æ¬¡æ•° |
| æ‹–æ‹½è°ƒæ•´ç‡ | >30% | æ‹–æ‹½è°ƒæ•´æ¬¡æ•° / äº‹ä»¶ç¼–è¾‘æ€»æ¬¡æ•° |
| å¿«é€Ÿåˆ›å»ºç‡ | >40% | åŒå‡»åˆ›å»ºæ¬¡æ•° / äº‹ä»¶åˆ›å»ºæ€»æ¬¡æ•° |
| å‘¨ç»Ÿè®¡æŸ¥çœ‹ç‡ | >20% | ç»Ÿè®¡é¢æ¿æ‰“å¼€æ¬¡æ•° / å‘¨è§†å›¾æ‰“å¼€æ¬¡æ•° |

**å®šæ€§æŒ‡æ ‡**:

- ç”¨æˆ·åé¦ˆ"å‘¨è§†å›¾æœ€å®ç”¨"
- æ—¥ç¨‹è§„åˆ’æ•ˆç‡æå‡
- æ—¶é—´å†²çªå‡å°‘

---

## 7. æŠ€æœ¯å®ç°è¦ç‚¹

### å‰ç«¯ç»„ä»¶ç»“æ„

```
apps/web/src/modules/schedule/components/week-view/
â”œâ”€â”€ WeekView.vue                    # ä¸»å®¹å™¨
â”œâ”€â”€ WeekHeader.vue                  # å‘¨æ ‡é¢˜ + å¯¼èˆª
â”œâ”€â”€ TimeAxis.vue                    # å·¦ä¾§æ—¶é—´è½´
â”œâ”€â”€ WeekGrid.vue                    # 7åˆ—æ—¶é—´æ§½ç½‘æ ¼
â”œâ”€â”€ EventBlock.vue                  # å•ä¸ªäº‹ä»¶å—
â”œâ”€â”€ DragPreview.vue                 # æ‹–æ‹½é¢„è§ˆ
â”œâ”€â”€ QuickCreatePanel.vue            # å¿«é€Ÿåˆ›å»ºé¢æ¿
â”œâ”€â”€ CalendarSelector.vue            # æ—¥å†é€‰æ‹©å™¨
â””â”€â”€ WeekStats.vue                   # å‘¨ç»Ÿè®¡é¢æ¿
```

### æ ¸å¿ƒç®—æ³•

#### 1. äº‹ä»¶å®šä½ç®—æ³•

```typescript
// å°†æ—¶é—´è½¬æ¢ä¸º CSS åæ ‡
function getEventPosition(event: ScheduleEvent): {
  column: number; // 0-6ï¼ˆå‘¨ä¸€åˆ°å‘¨æ—¥ï¼‰
  top: number; // px
  height: number; // px
} {
  // 1. è®¡ç®—æ˜¯å‘¨å‡ ï¼ˆ0=å‘¨ä¸€, 6=å‘¨æ—¥ï¼‰
  const column = getDay(event.startTime) - 1;

  // 2. è®¡ç®—ä» 00:00 å¼€å§‹çš„åˆ†é’Ÿæ•°
  const startMinutes = getHours(event.startTime) * 60 + getMinutes(event.startTime);
  const endMinutes = getHours(event.endTime) * 60 + getMinutes(event.endTime);

  // 3. è½¬æ¢ä¸ºåƒç´ åæ ‡
  const MINUTES_PER_SLOT = 30;
  const SLOT_HEIGHT = 40; // px

  const top = (startMinutes / MINUTES_PER_SLOT) * SLOT_HEIGHT;
  const height = ((endMinutes - startMinutes) / MINUTES_PER_SLOT) * SLOT_HEIGHT;

  return { column, top, height };
}
```

#### 2. å†²çªäº‹ä»¶å¸ƒå±€

```typescript
// å¤šä¸ªäº‹ä»¶é‡å æ—¶ï¼Œå¹¶æ’æ˜¾ç¤º
function layoutOverlappingEvents(events: ScheduleEvent[]): EventLayout[] {
  // 1. æŒ‰å¼€å§‹æ—¶é—´æ’åº
  const sorted = events.sort((a, b) => a.startTime - b.startTime);

  // 2. æ„å»ºé‡å ç»„
  const groups: ScheduleEvent[][] = [];
  let currentGroup: ScheduleEvent[] = [];

  for (const event of sorted) {
    if (currentGroup.length === 0) {
      currentGroup.push(event);
    } else {
      const lastEvent = currentGroup[currentGroup.length - 1];
      if (event.startTime < lastEvent.endTime) {
        // é‡å 
        currentGroup.push(event);
      } else {
        // ä¸é‡å ï¼Œå¼€å§‹æ–°ç»„
        groups.push(currentGroup);
        currentGroup = [event];
      }
    }
  }
  if (currentGroup.length > 0) {
    groups.push(currentGroup);
  }

  // 3. ä¸ºæ¯ç»„åˆ†é…åˆ—
  const layouts: EventLayout[] = [];
  for (const group of groups) {
    const columnCount = group.length;
    group.forEach((event, index) => {
      layouts.push({
        event,
        column: index,
        columnCount,
        width: `${100 / columnCount}%`,
        left: `${(index * 100) / columnCount}%`,
      });
    });
  }

  return layouts;
}
```

---

## 8. é£é™©ä¸ç¼“è§£

| é£é™©             | å¯èƒ½æ€§ | å½±å“ | ç¼“è§£æªæ–½                       |
| ---------------- | ------ | ---- | ------------------------------ |
| å¤§é‡äº‹ä»¶æ€§èƒ½é—®é¢˜ | ä¸­     | é«˜   | è™šæ‹Ÿæ»šåŠ¨ + äº‹ä»¶åˆ†é¡µåŠ è½½        |
| æ‹–æ‹½å†²çªè¯¯åˆ¤     | ä½     | ä¸­   | ç²¾ç¡®æ—¶é—´å¯¹é½ + ç”¨æˆ·ç¡®è®¤        |
| å¤šæ—¥å†åŒæ­¥å»¶è¿Ÿ   | ä¸­     | ä¸­   | æœ¬åœ°ç¼“å­˜ + åå°åŒæ­¥ + åŠ è½½çŠ¶æ€ |
| ç§»åŠ¨ç«¯å‘¨è§†å›¾éš¾ç”¨ | é«˜     | ä¸­   | æä¾›ç®€åŒ–çš„ç§»åŠ¨å‘¨è§†å›¾           |

---

## 9. åç»­å¢å¼ºæ–¹å‘

### Phase 2 åŠŸèƒ½

- ğŸ”„ è‡ªå®šä¹‰è§†å›¾é…ç½®ï¼ˆå¼€å§‹æ—¶é—´ã€æ—¶é—´æ§½ç²’åº¦ï¼‰
- ğŸ“… å·¥ä½œæ—¥æ¨¡å¼ï¼ˆä»…æ˜¾ç¤ºå‘¨ä¸€åˆ°å‘¨äº”ï¼‰
- ğŸ¨ äº‹ä»¶æ ·å¼è‡ªå®šä¹‰ï¼ˆè¾¹æ¡†ã€å›¾æ ‡ï¼‰
- ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼ˆæ¨ªå‘æ»šåŠ¨ï¼‰

### Phase 3 åŠŸèƒ½

- ğŸ¤– AI æ—¶é—´å®‰æ’å»ºè®®
- ğŸ“Š é•¿æœŸè¶‹åŠ¿åˆ†æï¼ˆå¤šå‘¨å¯¹æ¯”ï¼‰
- ğŸ”— ä¸ä»»åŠ¡æ¨¡å—è”åŠ¨ï¼ˆæ˜¾ç¤ºä»»åŠ¡æˆªæ­¢ï¼‰
- ğŸŒ™ ä¸“æ³¨æ¨¡å¼ï¼ˆéšè—éæ ¸å¿ƒäº‹ä»¶ï¼‰

---

## 10. å‚è€ƒèµ„æ–™

- [Schedule Contracts](../../../../packages/contracts/src/modules/schedule/)
- [Google Calendar Week View](https://calendar.google.com)
- [FullCalendar Library](https://fullcalendar.io/)

---

**æ–‡æ¡£çŠ¶æ€**: âœ… Ready for PM Review  
**ä¸‹ä¸€æ­¥**: PM ç”Ÿæˆ Project Flow

---

**æ–‡æ¡£ç»´æŠ¤**:

- åˆ›å»º: 2025-10-21
- åˆ›å»ºè€…: PO Agent
- ç‰ˆæœ¬: 1.0
- ä¸‹æ¬¡æ›´æ–°: Sprint Planning å‰
