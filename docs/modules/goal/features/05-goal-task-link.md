# Feature Spec: ç›®æ ‡ä»»åŠ¡å…³è”

> **åŠŸèƒ½ç¼–å·**: GOAL-005  
> **RICE è¯„åˆ†**: 224 (Reach: 8, Impact: 7, Confidence: 8, Effort: 2)  
> **ä¼˜å…ˆçº§**: P1  
> **é¢„ä¼°æ—¶é—´**: 1.5-2 å‘¨  
> **çŠ¶æ€**: Draft  
> **è´Ÿè´£äºº**: TBD  
> **æœ€åæ›´æ–°**: 2025-10-21

---

## 1. æ¦‚è¿°ä¸ç›®æ ‡

### èƒŒæ™¯ä¸ç—›ç‚¹

ç›®æ ‡ç®¡ç†çš„æ ¸å¿ƒåœ¨äºå°†å®è§‚ç›®æ ‡æ‹†è§£ä¸ºå¯æ‰§è¡Œçš„å…·ä½“ä»»åŠ¡ï¼Œä½†ç°æœ‰å·¥å…·æ™®éå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

- âŒ ç›®æ ‡å’Œä»»åŠ¡åˆ†ç¦»ç®¡ç†ï¼Œæ— æ³•å»ºç«‹æ¸…æ™°çš„å±‚çº§å…³ç³»
- âŒ ä»»åŠ¡å®Œæˆåï¼Œç›®æ ‡è¿›åº¦ä¸è‡ªåŠ¨æ›´æ–°
- âŒ éš¾ä»¥è¿½æº¯ä»»åŠ¡å¯¹ç›®æ ‡çš„è´¡çŒ®åº¦
- âŒ æ— æ³•å¿«é€ŸæŸ¥çœ‹ç›®æ ‡ä¸‹çš„æ‰€æœ‰ä»»åŠ¡
- âŒ ä»»åŠ¡å’Œ KR ä¹‹é—´çš„å…³è”ä¸æ˜ç¡®

### ç›®æ ‡ç”¨æˆ·

- **ä¸»è¦ç”¨æˆ·**: ä½¿ç”¨ OKR/KPI è¿›è¡Œç›®æ ‡ç®¡ç†çš„ä¸ªäººå’Œå›¢é˜Ÿ
- **æ¬¡è¦ç”¨æˆ·**: éœ€è¦é¡¹ç›®æ‹†è§£å’Œä»»åŠ¡è¿½è¸ªçš„é¡¹ç›®ç»ç†
- **å…¸å‹ç”»åƒ**: "æˆ‘è®¾å®šäº†å­£åº¦ç›®æ ‡ï¼Œä½†ä¸çŸ¥é“æ¯å¤©çš„ä»»åŠ¡å¦‚ä½•æ¨åŠ¨ç›®æ ‡è¾¾æˆ"

### ä»·å€¼ä¸»å¼ 

**ä¸€å¥è¯ä»·å€¼**: å»ºç«‹ç›®æ ‡ä¸ä»»åŠ¡çš„åŒå‘å…³è”ï¼Œä»»åŠ¡å®Œæˆè‡ªåŠ¨æ¨åŠ¨ç›®æ ‡è¿›åº¦

**æ ¸å¿ƒæ”¶ç›Š**:

- âœ… ä¸€é”®å°†ä»»åŠ¡å…³è”åˆ°ç›®æ ‡/KR
- âœ… ä»»åŠ¡å®Œæˆè‡ªåŠ¨æ›´æ–° KR è¿›åº¦
- âœ… å¯è§†åŒ–ç›®æ ‡ä»»åŠ¡åˆ†è§£æ ‘
- âœ… ä»»åŠ¡è´¡çŒ®åº¦åˆ†æ
- âœ… æœªå…³è”ä»»åŠ¡æé†’

---

## 2. ç”¨æˆ·ä»·å€¼ä¸åœºæ™¯

### æ ¸å¿ƒåœºæ™¯ 1: åˆ›å»ºä»»åŠ¡æ—¶å…³è”ç›®æ ‡

**åœºæ™¯æè¿°**:  
ç”¨æˆ·åˆ›å»ºæ–°ä»»åŠ¡æ—¶ï¼Œå¯é€‰æ‹©å…³è”åˆ°æŸä¸ªç›®æ ‡æˆ– KRã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a ç›®æ ‡ç®¡ç†è€…
I want åˆ›å»ºä»»åŠ¡æ—¶å…³è”åˆ°ç›®æ ‡
So that æ˜ç¡®ä»»åŠ¡å¯¹ç›®æ ‡çš„è´¡çŒ®
```

**æ“ä½œæµç¨‹**:

1. ç”¨æˆ·åˆ›å»ºæ–°ä»»åŠ¡ï¼š"å®Œæˆç”¨æˆ·è®¤è¯æ¨¡å—å¼€å‘"
2. åœ¨ä»»åŠ¡åˆ›å»ºè¡¨å•ä¸­çœ‹åˆ°"å…³è”ç›®æ ‡"é€‰é¡¹ï¼š
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ åˆ›å»ºä»»åŠ¡                            â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ æ ‡é¢˜: å®Œæˆç”¨æˆ·è®¤è¯æ¨¡å—å¼€å‘          â”‚
   â”‚ æè¿°: ...                           â”‚
   â”‚ ä¼˜å…ˆçº§: HIGH                        â”‚
   â”‚ æˆªæ­¢æ—¥æœŸ: 2025-11-01                â”‚
   â”‚                                     â”‚
   â”‚ ğŸ¯ å…³è”ç›®æ ‡ (å¯é€‰)                  â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚ â”‚ æœç´¢ç›®æ ‡æˆ– KR...              â”‚   â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                     â”‚
   â”‚ æ¨èå…³è”ï¼š                          â”‚
   â”‚ ğŸ“Š Q4 äº§å“ä¸Šçº¿                      â”‚
   â”‚    â””â”€ KR1: å®Œæˆæ ¸å¿ƒåŠŸèƒ½å¼€å‘ (60%) â”‚
   â”‚       [å…³è”åˆ°æ­¤ KR]                â”‚
   â”‚                                     â”‚
   â”‚ ğŸ“Š æŠ€æœ¯å€ºåŠ¡æ¸…ç†                     â”‚
   â”‚    â””â”€ KR2: é‡æ„ 3 ä¸ªæ ¸å¿ƒæ¨¡å—      â”‚
   â”‚       [å…³è”åˆ°æ­¤ KR]                â”‚
   â”‚                                     â”‚
   â”‚ [æµè§ˆå…¨éƒ¨ç›®æ ‡]                      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```
3. ç”¨æˆ·ç‚¹å‡»"å…³è”åˆ°æ­¤ KR"ï¼ˆQ4 äº§å“ä¸Šçº¿ - KR1ï¼‰
4. ç³»ç»Ÿåˆ›å»ºå…³è”è®°å½•ï¼š
   ```typescript
   {
     taskUuid: 'task-123',
     goalUuid: 'goal-456',
     keyResultUuid: 'kr-789',
     contributionWeight: 10,  // é»˜è®¤æƒé‡
     linkType: 'contributes_to'
   }
   ```
5. ä»»åŠ¡å¡ç‰‡æ˜¾ç¤ºå…³è”ä¿¡æ¯ï¼š
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ âœ“ å®Œæˆç”¨æˆ·è®¤è¯æ¨¡å—å¼€å‘              â”‚
   â”‚ ä¼˜å…ˆçº§: HIGH  |  æˆªæ­¢: 2025-11-01   â”‚
   â”‚                                     â”‚
   â”‚ ğŸ¯ å…³è”ç›®æ ‡:                        â”‚
   â”‚    Q4 äº§å“ä¸Šçº¿ > KR1: å®Œæˆæ ¸å¿ƒåŠŸèƒ½  â”‚
   â”‚    è´¡çŒ®åº¦: 10%                      â”‚
   â”‚                                     â”‚
   â”‚ [æŸ¥çœ‹ç›®æ ‡è¯¦æƒ…]  [è°ƒæ•´è´¡çŒ®åº¦]        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

**é¢„æœŸç»“æœ**:

- ä»»åŠ¡æˆåŠŸå…³è”åˆ° KR
- æ˜¾ç¤ºå…³è”è·¯å¾„ï¼ˆç›®æ ‡ > KR > ä»»åŠ¡ï¼‰
- è®¾å®šé»˜è®¤è´¡çŒ®åº¦æƒé‡

---

### æ ¸å¿ƒåœºæ™¯ 2: ä»»åŠ¡å®Œæˆè‡ªåŠ¨æ›´æ–° KR è¿›åº¦

**åœºæ™¯æè¿°**:  
å½“å…³è”ä»»åŠ¡å®Œæˆæ—¶ï¼Œè‡ªåŠ¨æ¨åŠ¨ KR è¿›åº¦æ›´æ–°ã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a ç›®æ ‡ç®¡ç†è€…
I want ä»»åŠ¡å®Œæˆå KR è¿›åº¦è‡ªåŠ¨æ›´æ–°
So that æˆ‘ä¸éœ€è¦æ‰‹åŠ¨ç»´æŠ¤ç›®æ ‡è¿›åº¦
```

**æ“ä½œæµç¨‹**:

1. KR å½“å‰çŠ¶æ€ï¼š

   ```
   KR1: å®Œæˆæ ¸å¿ƒåŠŸèƒ½å¼€å‘
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   å½“å‰è¿›åº¦: 60%
   å…³è”ä»»åŠ¡: 5 ä¸ªï¼ˆ3 å·²å®Œæˆï¼Œ2 è¿›è¡Œä¸­ï¼‰

   ä»»åŠ¡åˆ—è¡¨ï¼š
   âœ… ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½ (è´¡çŒ®åº¦: 15%)
   âœ… ç”¨æˆ·ç™»å½•åŠŸèƒ½ (è´¡çŒ®åº¦: 15%)
   âœ… ç”¨æˆ·è®¤è¯æ¨¡å— (è´¡çŒ®åº¦: 10%)
   ğŸ”„ æƒé™ç®¡ç†æ¨¡å— (è´¡çŒ®åº¦: 20%)
   â³ æ•°æ®å¯¼å‡ºåŠŸèƒ½ (è´¡çŒ®åº¦: 10%)

   æ€»è´¡çŒ®åº¦: 70% (å·²åˆ†é…)
   å‰©ä½™å¯åˆ†é…: 30%
   ```

2. ç”¨æˆ·å°†"æƒé™ç®¡ç†æ¨¡å—"æ ‡è®°ä¸ºå®Œæˆ
3. ç³»ç»Ÿè§¦å‘ KR è¿›åº¦æ›´æ–°é€»è¾‘ï¼š

   ```typescript
   // è®¡ç®— KR è¿›åº¦
   const completedTasks = tasks.filter((t) => t.status === 'COMPLETED');
   const totalContribution = completedTasks.reduce((sum, t) => sum + t.contributionWeight, 0);

   // æ›´æ–° KR è¿›åº¦
   kr.currentProgress = totalContribution; // 60% â†’ 80%
   ```

4. ç³»ç»Ÿå‘é€é€šçŸ¥ï¼š

   ```
   ğŸ‰ ç›®æ ‡è¿›åº¦æ›´æ–°
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   æ‚¨å®Œæˆäº†ä»»åŠ¡"æƒé™ç®¡ç†æ¨¡å—"

   KR è¿›åº¦å·²æ›´æ–°ï¼š
   ğŸ“Š KR1: å®Œæˆæ ¸å¿ƒåŠŸèƒ½å¼€å‘
   60% â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 80% (+20%)

   å‰©ä½™ä»»åŠ¡: 1 ä¸ª
   é¢„è®¡å®Œæˆæ—¥æœŸ: 2025-11-05

   [æŸ¥çœ‹ç›®æ ‡è¯¦æƒ…]
   ```

5. ç›®æ ‡è¯¦æƒ…é¡µè‡ªåŠ¨åˆ·æ–°è¿›åº¦

**é¢„æœŸç»“æœ**:

- KR è¿›åº¦è‡ªåŠ¨ä» 60% æ›´æ–°åˆ° 80%
- å‘é€è¿›åº¦æ›´æ–°é€šçŸ¥
- è§¦å‘ç›®æ ‡è¿›åº¦é‡æ–°è®¡ç®—ï¼ˆå¦‚æœ KR æœ‰æƒé‡ï¼‰

---

### æ ¸å¿ƒåœºæ™¯ 3: å¯è§†åŒ–ç›®æ ‡ä»»åŠ¡åˆ†è§£æ ‘

**åœºæ™¯æè¿°**:  
ç”¨æˆ·ä»¥æ ‘å½¢ç»“æ„æŸ¥çœ‹ç›®æ ‡çš„å®Œæ•´ä»»åŠ¡åˆ†è§£ã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a ç›®æ ‡ç®¡ç†è€…
I want æŸ¥çœ‹ç›®æ ‡çš„ä»»åŠ¡åˆ†è§£æ ‘
So that æˆ‘å¯ä»¥å…¨å±€äº†è§£ç›®æ ‡æ‰§è¡Œæƒ…å†µ
```

**æ“ä½œæµç¨‹**:

1. ç”¨æˆ·æ‰“å¼€ç›®æ ‡è¯¦æƒ…é¡µ
2. ç‚¹å‡»"ä»»åŠ¡åˆ†è§£æ ‘"æ ‡ç­¾
3. ç³»ç»Ÿå±•ç¤ºæ ‘å½¢ç»“æ„ï¼š

   ```
   ğŸ“Š Q4 äº§å“ä¸Šçº¿ (æ€»è¿›åº¦: 65%)
   â”œâ”€ ğŸ“ˆ KR1: å®Œæˆæ ¸å¿ƒåŠŸèƒ½å¼€å‘ (80%)
   â”‚  â”œâ”€ âœ… ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½ (15%)
   â”‚  â”œâ”€ âœ… ç”¨æˆ·ç™»å½•åŠŸèƒ½ (15%)
   â”‚  â”œâ”€ âœ… ç”¨æˆ·è®¤è¯æ¨¡å— (10%)
   â”‚  â”œâ”€ âœ… æƒé™ç®¡ç†æ¨¡å— (20%)
   â”‚  â””â”€ â³ æ•°æ®å¯¼å‡ºåŠŸèƒ½ (10%)
   â”‚
   â”œâ”€ ğŸ“ˆ KR2: å®Œæˆæ€§èƒ½ä¼˜åŒ– (60%)
   â”‚  â”œâ”€ âœ… æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ– (20%)
   â”‚  â”œâ”€ âœ… å‰ç«¯æ‰“åŒ…ä¼˜åŒ– (20%)
   â”‚  â”œâ”€ ğŸ”„ CDN éƒ¨ç½² (15%)
   â”‚  â””â”€ â³ ç¼“å­˜ç­–ç•¥å®æ–½ (15%)
   â”‚
   â””â”€ ğŸ“ˆ KR3: é€šè¿‡ UAT æµ‹è¯• (50%)
      â”œâ”€ âœ… ç¼–å†™æµ‹è¯•ç”¨ä¾‹ (20%)
      â”œâ”€ ğŸ”„ æ‰§è¡ŒåŠŸèƒ½æµ‹è¯• (20%)
      â””â”€ â³ ä¿®å¤ Bug (30%)

   å›¾ä¾‹ï¼š
   âœ… å·²å®Œæˆ  ğŸ”„ è¿›è¡Œä¸­  â³ æœªå¼€å§‹  âŒ å·²å–æ¶ˆ

   ç»Ÿè®¡ï¼š
   æ€»ä»»åŠ¡æ•°: 13
   å·²å®Œæˆ: 6 (46%)
   è¿›è¡Œä¸­: 3 (23%)
   æœªå¼€å§‹: 4 (31%)

   [å±•å¼€å…¨éƒ¨]  [æ”¶èµ·]  [å¯¼å‡º]
   ```

4. ç”¨æˆ·ç‚¹å‡»æŸä¸ªä»»åŠ¡èŠ‚ç‚¹
5. ç³»ç»Ÿæ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…å¼¹çª—
6. ç”¨æˆ·ç‚¹å‡»"å¯¼å‡º"
7. ç³»ç»Ÿç”Ÿæˆ Markdown/Excel æ ¼å¼çš„åˆ†è§£æ ‘

**é¢„æœŸç»“æœ**:

- æ ‘å½¢å¯è§†åŒ–å±•ç¤º
- æ”¯æŒå±•å¼€/æ”¶èµ·
- æ˜¾ç¤ºå„å±‚çº§è¿›åº¦
- å¯å¯¼å‡º

---

### æ ¸å¿ƒåœºæ™¯ 4: è°ƒæ•´ä»»åŠ¡è´¡çŒ®åº¦æƒé‡

**åœºæ™¯æè¿°**:  
ç”¨æˆ·å¯åŠ¨æ€è°ƒæ•´ä»»åŠ¡å¯¹ KR çš„è´¡çŒ®åº¦æƒé‡ã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a ç›®æ ‡ç®¡ç†è€…
I want è°ƒæ•´ä»»åŠ¡çš„è´¡çŒ®åº¦æƒé‡
So that å‡†ç¡®åæ˜ ä»»åŠ¡å¯¹ç›®æ ‡çš„ä»·å€¼
```

**æ“ä½œæµç¨‹**:

1. ç”¨æˆ·æ‰“å¼€ KR è¯¦æƒ…é¡µï¼ŒæŸ¥çœ‹å…³è”ä»»åŠ¡ï¼š

   ```
   KR1: å®Œæˆæ ¸å¿ƒåŠŸèƒ½å¼€å‘
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   å…³è”ä»»åŠ¡è´¡çŒ®åº¦åˆ†é…ï¼š

   âœ… ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½
      è´¡çŒ®åº¦: 15% [â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â–‘â–‘â–‘â–‘â–‘]
      [è°ƒæ•´]

   âœ… ç”¨æˆ·ç™»å½•åŠŸèƒ½
      è´¡çŒ®åº¦: 15% [â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â–‘â–‘â–‘â–‘â–‘]
      [è°ƒæ•´]

   ğŸ”„ æƒé™ç®¡ç†æ¨¡å—
      è´¡çŒ®åº¦: 20% [â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â–‘]
      [è°ƒæ•´]

   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   å·²åˆ†é…: 70%
   å‰©ä½™: 30%

   âš ï¸ å»ºè®®ï¼šè¿˜æœ‰ 30% æœªåˆ†é…ï¼Œè€ƒè™‘æ·»åŠ æ›´å¤šä»»åŠ¡

   [æ‰¹é‡è°ƒæ•´]  [è‡ªåŠ¨åˆ†é…]
   ```

2. ç”¨æˆ·å‘ç°"æƒé™ç®¡ç†æ¨¡å—"å®é™…æ›´é‡è¦ï¼Œç‚¹å‡»"è°ƒæ•´"
3. å¼¹å‡ºæƒé‡è°ƒæ•´çª—å£ï¼š

   ```
   è°ƒæ•´è´¡çŒ®åº¦
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ä»»åŠ¡: æƒé™ç®¡ç†æ¨¡å—
   å½“å‰è´¡çŒ®åº¦: 20%

   æ–°è´¡çŒ®åº¦: [â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â–‘â–‘] 30%

   ğŸ’¡ æç¤ºï¼š
   - è°ƒæ•´åå‰©ä½™å¯åˆ†é…: 20%
   - è¯¥ä»»åŠ¡å®Œæˆåï¼ŒKR è¿›åº¦å°†ä» 60% æå‡è‡³ 70%

   [ç¡®è®¤]  [å–æ¶ˆ]
   ```

4. ç”¨æˆ·ç¡®è®¤è°ƒæ•´
5. ç³»ç»Ÿæ›´æ–°è´¡çŒ®åº¦å¹¶é‡æ–°è®¡ç®— KR è¿›åº¦
6. ç³»ç»Ÿæç¤ºå…¶ä»–ç›¸å…³ä»»åŠ¡æ˜¯å¦éœ€è¦è°ƒæ•´

**é¢„æœŸç»“æœ**:

- æ”¯æŒå•ä¸ªä»»åŠ¡æƒé‡è°ƒæ•´
- å®æ—¶æ˜¾ç¤ºè°ƒæ•´åçš„å½±å“
- æ€»æƒé‡ä¸è¶…è¿‡ 100% çš„æ ¡éªŒ
- è‡ªåŠ¨é‡æ–°è®¡ç®— KR è¿›åº¦

---

### æ ¸å¿ƒåœºæ™¯ 5: æœªå…³è”ä»»åŠ¡æé†’

**åœºæ™¯æè¿°**:  
ç³»ç»Ÿæ£€æµ‹åˆ°å¤§é‡æœªå…³è”ç›®æ ‡çš„ä»»åŠ¡ï¼Œæé†’ç”¨æˆ·å»ºç«‹å…³è”ã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a ç›®æ ‡ç®¡ç†è€…
I want è¢«æé†’æœªå…³è”ç›®æ ‡çš„ä»»åŠ¡
So that ç¡®ä¿æ‰€æœ‰å·¥ä½œéƒ½å¯¹å‡†ç›®æ ‡
```

**æ“ä½œæµç¨‹**:

1. ç”¨æˆ·ç™»å½•ç³»ç»Ÿ
2. ç³»ç»Ÿæ£€æµ‹åˆ° 10 ä¸ªæœªå…³è”ç›®æ ‡çš„é«˜ä¼˜å…ˆçº§ä»»åŠ¡
3. æ˜¾ç¤ºæé†’å¡ç‰‡ï¼š

   ```
   âš ï¸ æœªå…³è”ç›®æ ‡çš„ä»»åŠ¡
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   æ‚¨æœ‰ 10 ä¸ªé«˜ä¼˜å…ˆçº§ä»»åŠ¡å°šæœªå…³è”åˆ°ä»»ä½•ç›®æ ‡

   è¿™å¯èƒ½æ„å‘³ç€ï¼š
   â€¢ è¿™äº›ä»»åŠ¡ç¼ºå°‘æ˜ç¡®çš„ç›®æ ‡å¯¼å‘
   â€¢ å¯èƒ½éœ€è¦é‡æ–°è¯„ä¼°ä»»åŠ¡çš„ä»·å€¼

   å»ºè®®æ“ä½œï¼š
   1. å°†ä»»åŠ¡å…³è”åˆ°ç°æœ‰ç›®æ ‡
   2. åˆ›å»ºæ–°ç›®æ ‡æ‰¿æ¥è¿™äº›ä»»åŠ¡
   3. è°ƒæ•´ä»»åŠ¡ä¼˜å…ˆçº§

   æœªå…³è”ä»»åŠ¡ç¤ºä¾‹ï¼š
   ğŸ”´ ä¼˜åŒ–æ•°æ®åº“æ€§èƒ½ (HIGH)
   ğŸ”´ é‡æ„å‰ç«¯æ¶æ„ (HIGH)
   ğŸŸ¡ æ›´æ–°æ–‡æ¡£ (MEDIUM)

   [ç«‹å³å¤„ç†]  [å¿½ç•¥]  [ä¸å†æé†’]
   ```

4. ç”¨æˆ·ç‚¹å‡»"ç«‹å³å¤„ç†"
5. ç³»ç»Ÿè¿›å…¥æ‰¹é‡å…³è”æ¨¡å¼ï¼š

   ```
   æ‰¹é‡å…³è”ä»»åŠ¡åˆ°ç›®æ ‡
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   æœªå…³è”ä»»åŠ¡ (10)          å¯ç”¨ç›®æ ‡ (3)

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â˜‘ï¸ ä¼˜åŒ–æ•°æ®åº“    â”‚â”€â”€â”€â†’â”‚ ğŸ“Š Q4 äº§å“ä¸Šçº¿  â”‚
   â”‚ â˜‘ï¸ é‡æ„å‰ç«¯æ¶æ„  â”‚    â”‚ ğŸ“Š æŠ€æœ¯å€ºåŠ¡æ¸…ç† â”‚
   â”‚ â˜ æ›´æ–°æ–‡æ¡£      â”‚    â”‚ ğŸ“Š å›¢é˜Ÿæ•ˆèƒ½æå‡ â”‚
   â”‚ â˜ ...           â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   æ™ºèƒ½æ¨èï¼š
   ğŸ’¡ "ä¼˜åŒ–æ•°æ®åº“" æ¨èå…³è”åˆ° "Q4 äº§å“ä¸Šçº¿ > KR2"
      ç†ç”±ï¼šæ ‡ç­¾åŒ¹é… (#æ€§èƒ½ä¼˜åŒ–)

   [åº”ç”¨æ¨è]  [æ‰‹åŠ¨å…³è”]  [è·³è¿‡]
   ```

6. ç”¨æˆ·é€‰æ‹©æ¨èæˆ–æ‰‹åŠ¨å…³è”
7. ç³»ç»Ÿæ‰¹é‡åˆ›å»ºå…³è”

**é¢„æœŸç»“æœ**:

- è‡ªåŠ¨æ£€æµ‹æœªå…³è”ä»»åŠ¡
- æä¾›æ™ºèƒ½æ¨è
- æ”¯æŒæ‰¹é‡æ“ä½œ

---

### æ ¸å¿ƒåœºæ™¯ 6: ç›®æ ‡ä»»åŠ¡çœ‹æ¿è§†å›¾

**åœºæ™¯æè¿°**:  
ç”¨æˆ·ä»¥çœ‹æ¿å½¢å¼æŸ¥çœ‹ç›®æ ‡ä¸‹çš„æ‰€æœ‰ä»»åŠ¡ã€‚

**ç”¨æˆ·æ•…äº‹**:

```gherkin
As a ç›®æ ‡ç®¡ç†è€…
I want ä»¥çœ‹æ¿å½¢å¼æŸ¥çœ‹ç›®æ ‡ä»»åŠ¡
So that ç›´è§‚äº†è§£ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€
```

**æ“ä½œæµç¨‹**:

1. ç”¨æˆ·æ‰“å¼€ç›®æ ‡è¯¦æƒ…é¡µ
2. ç‚¹å‡»"ä»»åŠ¡çœ‹æ¿"æ ‡ç­¾
3. ç³»ç»Ÿå±•ç¤ºçœ‹æ¿è§†å›¾ï¼š

   ```
   ç›®æ ‡: Q4 äº§å“ä¸Šçº¿
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

   å¾…å¤„ç† (4)        è¿›è¡Œä¸­ (3)        å·²å®Œæˆ (6)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚æ•°æ®å¯¼å‡º  â”‚     â”‚CDN éƒ¨ç½²  â”‚     â”‚ç”¨æˆ·æ³¨å†Œ  â”‚
   â”‚åŠŸèƒ½      â”‚     â”‚          â”‚     â”‚åŠŸèƒ½      â”‚
   â”‚ğŸ¯ KR1    â”‚     â”‚ğŸ¯ KR2    â”‚     â”‚ğŸ¯ KR1    â”‚
   â”‚ğŸ“… 11-05  â”‚     â”‚ğŸ“… 10-28  â”‚     â”‚âœ“ 10-15   â”‚
   â”‚è´¡çŒ®:10%  â”‚     â”‚è´¡çŒ®:15%  â”‚     â”‚è´¡çŒ®:15%  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ç¼“å­˜ç­–ç•¥  â”‚     â”‚åŠŸèƒ½æµ‹è¯•  â”‚     â”‚ç”¨æˆ·ç™»å½•  â”‚
   â”‚å®æ–½      â”‚     â”‚          â”‚     â”‚åŠŸèƒ½      â”‚
   â”‚ğŸ¯ KR2    â”‚     â”‚ğŸ¯ KR3    â”‚     â”‚ğŸ¯ KR1    â”‚
   â”‚ğŸ“… 11-10  â”‚     â”‚ğŸ“… 10-25  â”‚     â”‚âœ“ 10-16   â”‚
   â”‚è´¡çŒ®:15%  â”‚     â”‚è´¡çŒ®:20%  â”‚     â”‚è´¡çŒ®:15%  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   æŒ‰ KR ç­›é€‰: [å…¨éƒ¨] [KR1] [KR2] [KR3]
   æ’åº: [æˆªæ­¢æ—¥æœŸ] [è´¡çŒ®åº¦] [ä¼˜å…ˆçº§]

   [+ æ–°å»ºä»»åŠ¡]
   ```

4. ç”¨æˆ·æ‹–æ‹½"æ•°æ®å¯¼å‡ºåŠŸèƒ½"åˆ°"è¿›è¡Œä¸­"åˆ—
5. ç³»ç»Ÿæ›´æ–°ä»»åŠ¡çŠ¶æ€
6. ç”¨æˆ·ç‚¹å‡»"KR1"ç­›é€‰
7. çœ‹æ¿ä»…æ˜¾ç¤ºå…³è”åˆ° KR1 çš„ä»»åŠ¡

**é¢„æœŸç»“æœ**:

- çœ‹æ¿è§†å›¾å±•ç¤ºä»»åŠ¡
- æ˜¾ç¤ºå…³è”çš„ KR
- æ”¯æŒæ‹–æ‹½æ›´æ–°çŠ¶æ€
- æ”¯æŒæŒ‰ KR ç­›é€‰

---

## 3. è®¾è®¡è¦ç‚¹

### æ¶‰åŠå­—æ®µï¼ˆå¯¹é½ Contractsï¼‰

#### æ–°å¢å®ä½“ï¼šGoalTaskLinkï¼ˆç›®æ ‡ä»»åŠ¡å…³è”ï¼‰

**ä½ç½®**: `packages/contracts/src/modules/goal/entities/GoalTaskLinkServer.ts`

```typescript
/**
 * ç›®æ ‡ä»»åŠ¡å…³è”
 */
export interface GoalTaskLinkServerDTO {
  readonly uuid: string;
  readonly goalUuid: string; // ç›®æ ‡ UUID
  readonly keyResultUuid?: string; // KR UUIDï¼ˆå¯é€‰ï¼Œç›´æ¥å…³è”ç›®æ ‡ï¼‰
  readonly taskUuid: string; // ä»»åŠ¡ UUID
  readonly contributionWeight: number; // è´¡çŒ®åº¦æƒé‡ï¼ˆ0-100ï¼‰
  readonly linkType: GoalTaskLinkType;
  readonly autoCreated: boolean; // æ˜¯å¦è‡ªåŠ¨åˆ›å»º
  readonly metadata?: LinkMetadata;
  readonly createdBy: string;
  readonly createdAt: number;
  readonly updatedAt: number;
}

/**
 * å…³è”ç±»å‹
 */
export enum GoalTaskLinkType {
  CONTRIBUTES_TO = 'contributes_to', // è´¡çŒ®äºï¼ˆé»˜è®¤ï¼‰
  SUPPORTS = 'supports', // æ”¯æŒ
  PREREQUISITE = 'prerequisite', // å‰ç½®æ¡ä»¶
  MILESTONE = 'milestone', // é‡Œç¨‹ç¢‘
}

/**
 * å…³è”å…ƒæ•°æ®
 */
export interface LinkMetadata {
  readonly reason?: string; // å…³è”ç†ç”±
  readonly autoLinkedByTags?: string[]; // è‡ªåŠ¨å…³è”çš„æ ‡ç­¾
  readonly estimatedImpact?: number; // é¢„ä¼°å½±å“ï¼ˆ0-1ï¼‰
}
```

#### æ›´æ–° Goal å®ä½“

**ä½ç½®**: `packages/contracts/src/modules/goal/entities/GoalServer.ts`

```typescript
export interface GoalServerDTO {
  // ...existing fields...

  // ä»»åŠ¡å…³è”ç›¸å…³
  readonly linkedTasks?: GoalTaskLinkServerDTO[];
  readonly totalTaskCount?: number;
  readonly completedTaskCount?: number;
  readonly taskCompletionRate?: number; // ä»»åŠ¡å®Œæˆç‡
}
```

#### æ›´æ–° KeyResult å®ä½“

**ä½ç½®**: `packages/contracts/src/modules/goal/entities/KeyResultServer.ts`

```typescript
export interface KeyResultServerDTO {
  // ...existing fields...

  // ä»»åŠ¡å…³è”ç›¸å…³
  readonly linkedTasks?: GoalTaskLinkServerDTO[];
  readonly totalContributionWeight?: number; // å·²åˆ†é…çš„æ€»è´¡çŒ®åº¦
  readonly remainingWeight?: number; // å‰©ä½™å¯åˆ†é…æƒé‡
}
```

#### æ›´æ–° Task å®ä½“

**ä½ç½®**: `packages/contracts/src/modules/task/entities/TaskServer.ts`

```typescript
export interface TaskServerDTO {
  // ...existing fields...

  // ç›®æ ‡å…³è”ç›¸å…³
  readonly goalLinks?: GoalTaskLinkServerDTO[];
  readonly primaryGoalUuid?: string; // ä¸»è¦å…³è”ç›®æ ‡
  readonly contributesToGoals?: string[]; // è´¡çŒ®çš„ç›®æ ‡ UUID åˆ—è¡¨
}
```

---

### äº¤äº’è®¾è®¡

#### 1. å…³è”åˆ›å»ºæ–¹å¼

| æ–¹å¼       | è§¦å‘åœºæ™¯       | æƒé‡è®¾ç½®         |
| ---------- | -------------- | ---------------- |
| ä»»åŠ¡åˆ›å»ºæ—¶ | åˆ›å»ºä»»åŠ¡è¡¨å•   | é»˜è®¤ 10%         |
| ç›®æ ‡è¯¦æƒ…é¡µ | ç‚¹å‡»"æ·»åŠ ä»»åŠ¡" | è‡ªåŠ¨è®¡ç®—å‰©ä½™æƒé‡ |
| æ‰¹é‡å…³è”   | æœªå…³è”ä»»åŠ¡æé†’ | å¹³å‡åˆ†é…         |
| è‡ªåŠ¨æ¨è   | æ ‡ç­¾åŒ¹é…       | æ ¹æ®ç›¸ä¼¼åº¦       |

#### 2. è¿›åº¦è®¡ç®—é€»è¾‘

```typescript
// KR è¿›åº¦è®¡ç®—ï¼ˆåŸºäºä»»åŠ¡è´¡çŒ®åº¦ï¼‰
function calculateKRProgress(kr: KeyResult): number {
  const links = kr.linkedTasks || [];
  const completedContribution = links
    .filter((link) => link.task.status === 'COMPLETED')
    .reduce((sum, link) => sum + link.contributionWeight, 0);

  return Math.min(completedContribution, 100);
}

// ç›®æ ‡è¿›åº¦è®¡ç®—ï¼ˆåŸºäº KR æƒé‡å’Œä»»åŠ¡è´¡çŒ®ï¼‰
function calculateGoalProgress(goal: Goal): number {
  const krs = goal.keyResults || [];

  const weightedProgress = krs.reduce((sum, kr) => {
    const krProgress = calculateKRProgress(kr);
    return sum + (krProgress * kr.weight) / 100;
  }, 0);

  return Math.round(weightedProgress);
}
```

#### 3. è´¡çŒ®åº¦æƒé‡è§„åˆ™

| è§„åˆ™         | è¯´æ˜              |
| ------------ | ----------------- |
| å•ä¸ªä»»åŠ¡ä¸Šé™ | â‰¤ 50%             |
| KR æ€»æƒé‡    | â‰¤ 100%            |
| è­¦å‘Šé˜ˆå€¼     | è¶…è¿‡ 90% æç¤º     |
| é»˜è®¤æƒé‡     | 10%               |
| è‡ªåŠ¨åˆ†é…     | å‰©ä½™æƒé‡ / ä»»åŠ¡æ•° |

---

## 4. MVP/MMP/Full è·¯å¾„

### MVP: åŸºç¡€å…³è”åŠŸèƒ½ï¼ˆ1-1.5 å‘¨ï¼‰

**èŒƒå›´**:

- âœ… åˆ›å»ºä»»åŠ¡æ—¶å…³è”ç›®æ ‡/KR
- âœ… æ‰‹åŠ¨è®¾ç½®è´¡çŒ®åº¦æƒé‡
- âœ… ä»»åŠ¡å®Œæˆè‡ªåŠ¨æ›´æ–° KR è¿›åº¦
- âœ… ç›®æ ‡è¯¦æƒ…é¡µæ˜¾ç¤ºå…³è”ä»»åŠ¡åˆ—è¡¨
- âœ… ç®€å•çš„ä»»åŠ¡åˆ†è§£æ ‘ï¼ˆä¸¤å±‚ï¼‰

**æŠ€æœ¯è¦ç‚¹**:

- Contracts: å®šä¹‰ `GoalTaskLinkServerDTO`
- Domain: Goal èšåˆæ ¹æ·»åŠ  `linkTask()` æ–¹æ³•
- Application: `GoalTaskLinkService` åº”ç”¨æœåŠ¡
- API: `POST /api/v1/goals/:uuid/tasks`, `GET /api/v1/goals/:uuid/tasks`
- UI: å…³è”é€‰æ‹©å™¨ + ä»»åŠ¡åˆ—è¡¨

**éªŒæ”¶æ ‡å‡†**:

```gherkin
Given ç”¨æˆ·åˆ›å»ºæ–°ä»»åŠ¡
When å…³è”åˆ°æŸä¸ª KR å¹¶è®¾ç½®è´¡çŒ®åº¦ 20%
And å®Œæˆè¯¥ä»»åŠ¡
Then KR è¿›åº¦åº”è‡ªåŠ¨å¢åŠ  20%
And ç›®æ ‡è¯¦æƒ…é¡µåº”æ˜¾ç¤ºè¯¥ä»»åŠ¡
```

---

### MMP: æ™ºèƒ½æ¨èä¸å¯è§†åŒ–ï¼ˆ+1 å‘¨ï¼‰

**åœ¨ MVP åŸºç¡€ä¸Šæ–°å¢**:

- âœ… åŸºäºæ ‡ç­¾çš„è‡ªåŠ¨å…³è”æ¨è
- âœ… è´¡çŒ®åº¦æƒé‡æ™ºèƒ½å»ºè®®
- âœ… æœªå…³è”ä»»åŠ¡æ£€æµ‹ä¸æé†’
- âœ… æ‰¹é‡å…³è”æ“ä½œ
- âœ… å®Œæ•´çš„ä»»åŠ¡åˆ†è§£æ ‘ï¼ˆå¤šå±‚ï¼‰
- âœ… ä»»åŠ¡çœ‹æ¿è§†å›¾

**æŠ€æœ¯è¦ç‚¹**:

- æ¨èç®—æ³•ï¼ˆæ ‡ç­¾ç›¸ä¼¼åº¦ï¼‰
- å®šæ—¶ä»»åŠ¡æ£€æµ‹æœªå…³è”ä»»åŠ¡
- æ ‘å½¢ç»“æ„æ¸²æŸ“ï¼ˆé€’å½’ç»„ä»¶ï¼‰

**éªŒæ”¶æ ‡å‡†**:

```gherkin
Given ç”¨æˆ·åˆ›å»ºå¸¦ #æ€§èƒ½ä¼˜åŒ– æ ‡ç­¾çš„ä»»åŠ¡
When å­˜åœ¨ç›®æ ‡"æŠ€æœ¯å€ºåŠ¡æ¸…ç†"ä¹Ÿæœ‰ #æ€§èƒ½ä¼˜åŒ– æ ‡ç­¾
Then ç³»ç»Ÿåº”æ¨èå…³è”åˆ°è¯¥ç›®æ ‡
And æ˜¾ç¤ºæ¨èç†ç”±
```

---

### Full Release: é«˜çº§åˆ†æä¸ä¼˜åŒ–ï¼ˆ+1.5 å‘¨ï¼‰

**åœ¨ MMP åŸºç¡€ä¸Šæ–°å¢**:

- âœ… ä»»åŠ¡è´¡çŒ®åº¦åˆ†ææŠ¥å‘Š
- âœ… ç›®æ ‡ä»»åŠ¡å¥åº·åº¦æ£€æµ‹ï¼ˆè¿‡åº¦/ä¸è¶³åˆ†é…ï¼‰
- âœ… å…³è”å…³ç³»å›¾è°±
- âœ… ä»»åŠ¡è·¯å¾„åˆ†æï¼ˆAâ†’Bâ†’C ä¾èµ–é“¾ï¼‰
- âœ… å†å²å…³è”æ¨¡å¼å­¦ä¹ 
- âœ… è·¨ç›®æ ‡ä»»åŠ¡å†²çªæ£€æµ‹

**æŠ€æœ¯è¦ç‚¹**:

- å›¾ç®—æ³•ï¼ˆè·¯å¾„åˆ†æï¼‰
- æœºå™¨å­¦ä¹ ï¼ˆå…³è”æ¨¡å¼ï¼‰
- å†²çªæ£€æµ‹ç®—æ³•

**éªŒæ”¶æ ‡å‡†**:

```gherkin
Given æŸä¸ª KR å…³è”äº† 8 ä¸ªä»»åŠ¡ï¼Œæ€»è´¡çŒ®åº¦ 120%
When ç³»ç»Ÿæ‰§è¡Œå¥åº·åº¦æ£€æµ‹
Then åº”è­¦å‘Š"è´¡çŒ®åº¦è¶…è¿‡ 100%"
And å»ºè®®è°ƒæ•´æƒé‡
```

---

## 5. éªŒæ”¶æ ‡å‡†ï¼ˆGherkinï¼‰

### Feature: ç›®æ ‡ä»»åŠ¡å…³è”

#### Scenario 1: åˆ›å»ºä»»åŠ¡æ—¶å…³è”ç›®æ ‡

```gherkin
Feature: ç›®æ ‡ä»»åŠ¡å…³è”
  ä½œä¸ºç›®æ ‡ç®¡ç†è€…ï¼Œæˆ‘å¸Œæœ›å°†ä»»åŠ¡å…³è”åˆ°ç›®æ ‡

  Background:
    Given ç”¨æˆ·"éƒ‘å"å·²ç™»å½•
    And å­˜åœ¨ç›®æ ‡ï¼š
      | uuid    | title          | status  |
      | goal-1  | Q4 äº§å“ä¸Šçº¿    | IN_PROGRESS |
    And ç›®æ ‡æœ‰ KRï¼š
      | uuid  | title              | weight | progress |
      | kr-1  | å®Œæˆæ ¸å¿ƒåŠŸèƒ½å¼€å‘   | 50     | 60       |
      | kr-2  | å®Œæˆæ€§èƒ½ä¼˜åŒ–       | 30     | 40       |

  Scenario: ä»»åŠ¡åˆ›å»ºæ—¶é€‰æ‹©å…³è”
    When ç”¨æˆ·åˆ›å»ºæ–°ä»»åŠ¡"ç”¨æˆ·è®¤è¯æ¨¡å—"
    And é€‰æ‹©å…³è”åˆ° kr-1
    And è®¾ç½®è´¡çŒ®åº¦ä¸º 15%
    Then åº”åˆ›å»ºå…³è”è®°å½•ï¼š
      | å­—æ®µ               | å€¼              |
      | goalUuid           | goal-1          |
      | keyResultUuid      | kr-1            |
      | taskUuid           | æ–°ä»»åŠ¡ UUID     |
      | contributionWeight | 15              |
      | linkType           | contributes_to  |
    And ä»»åŠ¡è¯¦æƒ…åº”æ˜¾ç¤ºï¼š"å…³è”åˆ° Q4 äº§å“ä¸Šçº¿ > KR1"
```

---

#### Scenario 2: ä»»åŠ¡å®Œæˆè‡ªåŠ¨æ›´æ–° KR è¿›åº¦

```gherkin
  Background:
    Given kr-1 å½“å‰è¿›åº¦ä¸º 60%
    And kr-1 æœ‰å…³è”ä»»åŠ¡ï¼š
      | taskUuid | status      | contributionWeight |
      | task-1   | COMPLETED   | 20                 |
      | task-2   | COMPLETED   | 25                 |
      | task-3   | IN_PROGRESS | 15                 |
      | task-4   | TODO        | 10                 |

  Scenario: å®Œæˆä»»åŠ¡è§¦å‘è¿›åº¦æ›´æ–°
    When ç”¨æˆ·å°† task-3 çŠ¶æ€æ”¹ä¸º COMPLETED
    Then kr-1 çš„è¿›åº¦åº”æ›´æ–°ä¸ºï¼š
      | è®¡ç®—é€»è¾‘                       | ç»“æœ |
      | 20 + 25 + 15 (å·²å®Œæˆä»»åŠ¡æ€»è´¡çŒ®) | 60%  |
    And åº”å‘é€é€šçŸ¥ï¼š"KR1 è¿›åº¦ä» 45% æ›´æ–°è‡³ 60%"
    And ç›®æ ‡"Q4 äº§å“ä¸Šçº¿"çš„è¿›åº¦åº”é‡æ–°è®¡ç®—
```

---

#### Scenario 3: è´¡çŒ®åº¦æƒé‡éªŒè¯

```gherkin
  Background:
    Given kr-1 å·²åˆ†é…è´¡çŒ®åº¦ 70%
    And å‰©ä½™å¯åˆ†é…è´¡çŒ®åº¦ 30%

  Scenario: è¶…å‡ºæƒé‡é™åˆ¶
    When ç”¨æˆ·å°è¯•æ·»åŠ è´¡çŒ®åº¦ä¸º 40% çš„æ–°ä»»åŠ¡
    Then åº”æç¤ºé”™è¯¯ï¼š"è´¡çŒ®åº¦è¶…å‡ºé™åˆ¶ï¼ˆå‰©ä½™ 30%ï¼‰"
    And å»ºè®®ï¼š"è°ƒæ•´ä¸º 30% æˆ–è°ƒæ•´å·²æœ‰ä»»åŠ¡æƒé‡"
    And ä¸åº”åˆ›å»ºå…³è”

  Scenario: å•ä¸ªä»»åŠ¡æƒé‡è¿‡é«˜
    When ç”¨æˆ·å°è¯•è®¾ç½®ä»»åŠ¡è´¡çŒ®åº¦ä¸º 60%
    Then åº”æç¤ºè­¦å‘Šï¼š"å•ä¸ªä»»åŠ¡è´¡çŒ®åº¦è¿‡é«˜ï¼ˆä¸Šé™ 50%ï¼‰"
    And æä¾›é€‰é¡¹ï¼š"ç»§ç»­åˆ›å»º" æˆ– "è°ƒæ•´ä¸º 50%"
```

---

#### Scenario 4: ä»»åŠ¡åˆ†è§£æ ‘å±•ç¤º

```gherkin
  Background:
    Given goal-1 æœ‰ä»¥ä¸‹ KR å’Œä»»åŠ¡ï¼š
      | KR   | ä»»åŠ¡           | çŠ¶æ€      |
      | kr-1 | task-1         | COMPLETED |
      | kr-1 | task-2         | COMPLETED |
      | kr-2 | task-3         | IN_PROGRESS |

  Scenario: æŸ¥çœ‹åˆ†è§£æ ‘
    When ç”¨æˆ·æ‰“å¼€ goal-1 è¯¦æƒ…é¡µ
    And ç‚¹å‡»"ä»»åŠ¡åˆ†è§£æ ‘"
    Then åº”æ˜¾ç¤ºæ ‘å½¢ç»“æ„ï¼š
      """
      ğŸ“Š Q4 äº§å“ä¸Šçº¿
      â”œâ”€ ğŸ“ˆ KR1: å®Œæˆæ ¸å¿ƒåŠŸèƒ½å¼€å‘
      â”‚  â”œâ”€ âœ… task-1
      â”‚  â””â”€ âœ… task-2
      â””â”€ ğŸ“ˆ KR2: å®Œæˆæ€§èƒ½ä¼˜åŒ–
         â””â”€ ğŸ”„ task-3
      """
    And æ˜¾ç¤ºç»Ÿè®¡ï¼šæ€»ä»»åŠ¡ 3ï¼Œå·²å®Œæˆ 2ï¼Œè¿›è¡Œä¸­ 1
```

---

#### Scenario 5: æœªå…³è”ä»»åŠ¡æé†’

```gherkin
  Background:
    Given ç”¨æˆ·æœ‰ 15 ä¸ªé«˜ä¼˜å…ˆçº§ä»»åŠ¡
    And å…¶ä¸­ 10 ä¸ªæœªå…³è”ä»»ä½•ç›®æ ‡
    And ç”¨æˆ·åå¥½è®¾ç½®ä¸­å¯ç”¨äº†"æœªå…³è”ä»»åŠ¡æé†’"

  Scenario: ç™»å½•æ—¶æ£€æµ‹å¹¶æé†’
    When ç”¨æˆ·ç™»å½•ç³»ç»Ÿ
    Then åº”æ˜¾ç¤ºæé†’å¡ç‰‡ï¼š
      | å­—æ®µ       | å€¼                              |
      | æ ‡é¢˜       | æœªå…³è”ç›®æ ‡çš„ä»»åŠ¡                |
      | æ•°é‡       | 10                              |
      | ä¼˜å…ˆçº§     | HIGH                            |
    And æä¾›æ“ä½œï¼šç«‹å³å¤„ç†ã€å¿½ç•¥ã€ä¸å†æé†’

    When ç”¨æˆ·ç‚¹å‡»"ç«‹å³å¤„ç†"
    Then åº”è¿›å…¥æ‰¹é‡å…³è”æ¨¡å¼
    And æ˜¾ç¤ºæ™ºèƒ½æ¨èï¼ˆåŸºäºæ ‡ç­¾åŒ¹é…ï¼‰
```

---

#### Scenario 6: æ™ºèƒ½å…³è”æ¨è

```gherkin
  Background:
    Given ç”¨æˆ·åˆ›å»ºä»»åŠ¡"æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–"
    And ä»»åŠ¡æ ‡ç­¾ä¸ºï¼š#æ€§èƒ½ä¼˜åŒ– #æ•°æ®åº“
    And å­˜åœ¨ç›®æ ‡"æŠ€æœ¯å€ºåŠ¡æ¸…ç†"ï¼Œæ ‡ç­¾ä¸ºï¼š#æ€§èƒ½ä¼˜åŒ– #é‡æ„

  Scenario: åŸºäºæ ‡ç­¾æ¨èå…³è”
    When ä»»åŠ¡ä¿å­˜å
    Then åº”æ˜¾ç¤ºæ¨èï¼š
      | ç›®æ ‡             | åŒ¹é…æ ‡ç­¾     | ç›¸ä¼¼åº¦ |
      | æŠ€æœ¯å€ºåŠ¡æ¸…ç†     | #æ€§èƒ½ä¼˜åŒ–    | 75%    |
    And æ¨èç†ç”±ï¼š"æ ‡ç­¾åŒ¹é…åº¦ 75%"
    And æä¾›"ä¸€é”®å…³è”"æŒ‰é’®

    When ç”¨æˆ·ç‚¹å‡»"ä¸€é”®å…³è”"
    Then åº”åˆ›å»ºå…³è”ï¼Œè´¡çŒ®åº¦é»˜è®¤ä¸º 10%
    And å‘é€é€šçŸ¥ï¼š"ä»»åŠ¡å·²å…³è”åˆ°ç›®æ ‡ æŠ€æœ¯å€ºåŠ¡æ¸…ç†"
```

---

## 6. æŒ‡æ ‡ä¸è¿½è¸ª

### äº‹ä»¶åŸ‹ç‚¹

```typescript
// åˆ›å»ºå…³è”
{
  event: 'goal_task_link_created',
  properties: {
    goalUuid: string,
    keyResultUuid?: string,
    taskUuid: string,
    contributionWeight: number,
    linkType: GoalTaskLinkType,
    source: 'manual' | 'recommended' | 'auto'
  }
}

// KR è¿›åº¦è‡ªåŠ¨æ›´æ–°
{
  event: 'kr_progress_auto_updated',
  properties: {
    keyResultUuid: string,
    oldProgress: number,
    newProgress: number,
    triggeredByTaskUuid: string
  }
}

// è´¡çŒ®åº¦è°ƒæ•´
{
  event: 'contribution_weight_adjusted',
  properties: {
    linkUuid: string,
    oldWeight: number,
    newWeight: number
  }
}

// æŸ¥çœ‹åˆ†è§£æ ‘
{
  event: 'task_breakdown_tree_viewed',
  properties: {
    goalUuid: string,
    totalTasks: number,
    depth: number
  }
}
```

---

### æˆåŠŸæŒ‡æ ‡

**å®šé‡æŒ‡æ ‡**:
| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹å¼ |
|------|-------|---------|
| ä»»åŠ¡å…³è”ç‡ | >70% | å…³è”ä»»åŠ¡æ•° / æ€»ä»»åŠ¡æ•° |
| è‡ªåŠ¨è¿›åº¦æ›´æ–°å‡†ç¡®ç‡ | >95% | æ­£ç¡®æ›´æ–°æ¬¡æ•° / æ€»æ›´æ–°æ¬¡æ•° |
| æ¨èæ¥å—ç‡ | >50% | æ¥å—æ¨èæ•° / æ¨èæ€»æ•° |
| åˆ†è§£æ ‘æŸ¥çœ‹ç‡ | >40% | æŸ¥çœ‹ç”¨æˆ·æ•° / æ´»è·ƒç”¨æˆ·æ•° |

**å®šæ€§æŒ‡æ ‡**:

- ç”¨æˆ·åé¦ˆ"ç›®æ ‡å’Œä»»åŠ¡çš„å…³è”æ›´æ¸…æ™°"
- è¿›åº¦è¿½è¸ªè‡ªåŠ¨åŒ–ç¨‹åº¦æå‡
- ä»»åŠ¡ä¼˜å…ˆçº§æ›´æ˜ç¡®

---

## 7. æŠ€æœ¯å®ç°è¦ç‚¹

### Prisma Schema

```prisma
model GoalTaskLink {
  uuid                String   @id @default(uuid())
  goalUuid            String   @map("goal_uuid")
  keyResultUuid       String?  @map("key_result_uuid")
  taskUuid            String   @map("task_uuid")
  contributionWeight  Int      @map("contribution_weight")
  linkType            String   @map("link_type")
  autoCreated         Boolean  @default(false) @map("auto_created")
  metadata            Json?    @map("metadata")
  createdBy           String   @map("created_by")
  createdAt           DateTime @default(now()) @map("created_at")
  updatedAt           DateTime @updatedAt @map("updated_at")

  goal                Goal       @relation(fields: [goalUuid], references: [uuid])
  keyResult           KeyResult? @relation(fields: [keyResultUuid], references: [uuid])
  task                Task       @relation(fields: [taskUuid], references: [uuid])

  @@index([goalUuid])
  @@index([keyResultUuid])
  @@index([taskUuid])
  @@unique([taskUuid, keyResultUuid])
  @@map("goal_task_links")
}

// æ›´æ–° KeyResult æ¨¡å‹
model KeyResult {
  // ...existing fields...

  linkedTasks         GoalTaskLink[]

  @@map("key_results")
}

// æ›´æ–° Task æ¨¡å‹
model Task {
  // ...existing fields...

  goalLinks           GoalTaskLink[]

  @@map("tasks")
}
```

### Application Service

```typescript
// packages/domain-server/src/modules/goal/application/GoalTaskLinkService.ts

export class GoalTaskLinkService {
  // åˆ›å»ºä»»åŠ¡-ç›®æ ‡å…³è”
  async linkTaskToGoal(params: {
    goalUuid: string;
    keyResultUuid?: string;
    taskUuid: string;
    contributionWeight: number;
    linkType?: GoalTaskLinkType;
  }): Promise<GoalTaskLink> {
    const { goalUuid, keyResultUuid, taskUuid, contributionWeight, linkType } = params;

    // éªŒè¯è´¡çŒ®åº¦
    if (keyResultUuid) {
      await this.validateContributionWeight(keyResultUuid, contributionWeight);
    }

    // åˆ›å»ºå…³è”
    const link = new GoalTaskLink({
      goalUuid,
      keyResultUuid,
      taskUuid,
      contributionWeight,
      linkType: linkType || GoalTaskLinkType.CONTRIBUTES_TO,
      autoCreated: false,
    });

    await this.linkRepository.save(link);

    // å‘é€äº‹ä»¶
    this.eventBus.publish(new TaskLinkedToGoalEvent({ linkUuid: link.uuid }));

    return link;
  }

  // éªŒè¯è´¡çŒ®åº¦
  private async validateContributionWeight(
    keyResultUuid: string,
    newWeight: number,
  ): Promise<void> {
    const kr = await this.keyResultRepository.findByUuid(keyResultUuid);
    const existingLinks = await this.linkRepository.findByKeyResult(keyResultUuid);

    const totalAllocated = existingLinks.reduce((sum, link) => sum + link.contributionWeight, 0);

    if (totalAllocated + newWeight > 100) {
      throw new DomainError(
        `è´¡çŒ®åº¦è¶…å‡ºé™åˆ¶ï¼ˆå‰©ä½™ ${100 - totalAllocated}%ï¼‰`,
        'CONTRIBUTION_WEIGHT_EXCEEDED',
      );
    }

    if (newWeight > 50) {
      // è­¦å‘Šä½†ä¸é˜»æ­¢
      this.logger.warn(`å•ä¸ªä»»åŠ¡è´¡çŒ®åº¦è¿‡é«˜ï¼š${newWeight}%`);
    }
  }

  // ä»»åŠ¡å®Œæˆæ—¶æ›´æ–° KR è¿›åº¦
  async handleTaskCompleted(taskUuid: string): Promise<void> {
    const links = await this.linkRepository.findByTask(taskUuid);

    for (const link of links) {
      if (link.keyResultUuid) {
        await this.updateKRProgress(link.keyResultUuid);
      }
    }
  }

  // æ›´æ–° KR è¿›åº¦
  private async updateKRProgress(keyResultUuid: string): Promise<void> {
    const kr = await this.keyResultRepository.findByUuid(keyResultUuid);
    const links = await this.linkRepository.findByKeyResult(keyResultUuid);

    const completedContribution = links
      .filter((link) => link.task.status === TaskStatus.COMPLETED)
      .reduce((sum, link) => sum + link.contributionWeight, 0);

    const newProgress = Math.min(completedContribution, 100);

    if (kr.currentProgress !== newProgress) {
      kr.updateProgress(newProgress);
      await this.keyResultRepository.save(kr);

      // å‘é€è¿›åº¦æ›´æ–°äº‹ä»¶
      this.eventBus.publish(
        new KRProgressAutoUpdatedEvent({
          keyResultUuid,
          oldProgress: kr.currentProgress,
          newProgress,
        }),
      );
    }
  }

  // æ™ºèƒ½æ¨èå…³è”
  async recommendLinks(taskUuid: string): Promise<GoalTaskLinkRecommendation[]> {
    const task = await this.taskRepository.findByUuid(taskUuid);
    const goals = await this.goalRepository.findActive();

    const recommendations: GoalTaskLinkRecommendation[] = [];

    for (const goal of goals) {
      const similarity = this.calculateSimilarity(task, goal);

      if (similarity > 0.5) {
        recommendations.push({
          goalUuid: goal.uuid,
          taskUuid,
          similarity,
          reason: this.generateReason(task, goal),
          suggestedContribution: this.suggestContribution(goal),
        });
      }
    }

    return recommendations.sort((a, b) => b.similarity - a.similarity);
  }

  // è®¡ç®—ç›¸ä¼¼åº¦ï¼ˆåŸºäºæ ‡ç­¾ï¼‰
  private calculateSimilarity(task: Task, goal: Goal): number {
    const taskTags = new Set(task.tags);
    const goalTags = new Set(goal.tags);
    const intersection = new Set([...taskTags].filter((x) => goalTags.has(x)));
    const union = new Set([...taskTags, ...goalTags]);

    return intersection.size / union.size; // Jaccard ç›¸ä¼¼åº¦
  }
}
```

### API ç«¯ç‚¹

```typescript
// åˆ›å»ºä»»åŠ¡-ç›®æ ‡å…³è”
POST /api/v1/goals/:goalUuid/tasks
Body: {
  taskUuid: string,
  keyResultUuid?: string,
  contributionWeight: number,
  linkType?: GoalTaskLinkType
}
Response: GoalTaskLinkClientDTO

// è·å–ç›®æ ‡çš„æ‰€æœ‰å…³è”ä»»åŠ¡
GET /api/v1/goals/:goalUuid/tasks?includeCompleted=true
Response: {
  links: GoalTaskLinkClientDTO[],
  summary: {
    total: number,
    completed: number,
    inProgress: number
  }
}

// è·å–ä»»åŠ¡åˆ†è§£æ ‘
GET /api/v1/goals/:goalUuid/task-tree
Response: {
  goal: GoalClientDTO,
  tree: TaskTreeNode[]
}

// è°ƒæ•´è´¡çŒ®åº¦
PATCH /api/v1/goal-task-links/:linkUuid/weight
Body: {
  contributionWeight: number
}
Response: GoalTaskLinkClientDTO

// è·å–å…³è”æ¨è
GET /api/v1/tasks/:taskUuid/goal-recommendations
Response: {
  recommendations: GoalLinkRecommendationClientDTO[]
}

// æ‰¹é‡å…³è”ä»»åŠ¡
POST /api/v1/goals/:goalUuid/tasks/batch
Body: {
  links: Array<{
    taskUuid: string,
    keyResultUuid?: string,
    contributionWeight: number
  }>
}
Response: {
  created: GoalTaskLinkClientDTO[],
  failed: Array<{ taskUuid: string, error: string }>
}

// æ£€æµ‹æœªå…³è”ä»»åŠ¡
GET /api/v1/tasks/unlinked?priority=HIGH&limit=20
Response: {
  tasks: TaskClientDTO[],
  count: number
}
```

---

## 8. é£é™©ä¸ç¼“è§£

| é£é™©                 | å¯èƒ½æ€§ | å½±å“ | ç¼“è§£æªæ–½                |
| -------------------- | ------ | ---- | ----------------------- |
| è´¡çŒ®åº¦åˆ†é…ä¸åˆç†     | é«˜     | ä¸­   | æä¾›æ™ºèƒ½å»ºè®® + éªŒè¯è§„åˆ™ |
| è¿›åº¦æ›´æ–°é€»è¾‘å¤æ‚     | ä¸­     | é«˜   | å……åˆ†å•å…ƒæµ‹è¯• + äº‹åŠ¡ä¿è¯ |
| å…³è”å…³ç³»è¿‡äºå¤æ‚     | ä¸­     | ä¸­   | é™åˆ¶å…³è”å±‚çº§ + UI ç®€åŒ–  |
| æ€§èƒ½é—®é¢˜ï¼ˆå¤§é‡å…³è”ï¼‰ | ä¸­     | ä¸­   | åˆ†é¡µåŠ è½½ + ç´¢å¼•ä¼˜åŒ–     |

---

## 9. åç»­å¢å¼ºæ–¹å‘

### Phase 2 åŠŸèƒ½

- ğŸ”„ ä»»åŠ¡ä¾èµ–é“¾åˆ†æï¼ˆAâ†’Bâ†’Cï¼‰
- ğŸ“Š è´¡çŒ®åº¦å¥åº·åº¦æŠ¥å‘Š
- ğŸ¤– åŸºäºå†å²çš„æ™ºèƒ½è´¡çŒ®åº¦å»ºè®®
- ğŸ“± ç§»åŠ¨ç«¯çœ‹æ¿æ‹–æ‹½

### Phase 3 åŠŸèƒ½

- ğŸ”— è·¨ç›®æ ‡ä»»åŠ¡å†²çªæ£€æµ‹
- ğŸ‘¥ å›¢é˜Ÿç›®æ ‡ä»»åŠ¡ååŒ
- ğŸ¯ å…³é”®è·¯å¾„åˆ†æï¼ˆPERT/CPMï¼‰
- ğŸ“ˆ ä»»åŠ¡å¯¹ç›®æ ‡å½±å“åŠ›åˆ†æ

---

## 10. å‚è€ƒèµ„æ–™

- [Goal Contracts](../../../../packages/contracts/src/modules/goal/)
- [Task Contracts](../../../../packages/contracts/src/modules/task/)
- [OKR æœ€ä½³å®è·µ](https://www.whatmatters.com/resources/okr-examples)
- [ä»»åŠ¡åˆ†è§£æ–¹æ³•è®ºï¼ˆWBSï¼‰](https://en.wikipedia.org/wiki/Work_breakdown_structure)

---

**æ–‡æ¡£çŠ¶æ€**: âœ… Ready for PM Review  
**ä¸‹ä¸€æ­¥**: PM ç”Ÿæˆ Project Flow

---

**æ–‡æ¡£ç»´æŠ¤**:

- åˆ›å»º: 2025-10-21
- åˆ›å»ºè€…: PO Agent
- ç‰ˆæœ¬: 1.0
- ä¸‹æ¬¡æ›´æ–°: Sprint Planning å‰
